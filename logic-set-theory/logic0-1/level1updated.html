<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Logic 0–1 – Level 1</title>

  <!-- Basic layout styles -->
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
                   sans-serif;
      line-height: 1.5;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
    }

    header {
      background: #222;
      color: #fff;
      padding: 1rem 1.5rem;
    }

    header h1 {
      margin: 0;
      font-size: 1.6rem;
    }

    main {
      max-width: 900px;
      margin: 1.5rem auto 3rem;
      padding: 0 1rem 2rem;
      background: #fff;
      box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.08);
      border-radius: 8px;
    }

    section {
      margin-bottom: 2rem;
    }

    h2 {
      margin-top: 1.5rem;
      margin-bottom: 0.5rem;
      font-size: 1.3rem;
    }

    h3 {
      margin-top: 1rem;
      margin-bottom: 0.4rem;
      font-size: 1.1rem;
    }

    .note {
      font-size: 0.9rem;
      color: #555;
      margin-bottom: 0.8rem;
    }

    .problem-group {
      border-top: 1px solid #eee;
      padding-top: 1.25rem;
      margin-top: 1.25rem;
    }

    .problem-group:first-of-type {
      border-top: none;
      padding-top: 0;
      margin-top: 0.5rem;
    }

    .latex-input {
      width: 100%;
      min-height: 70px;
      padding: 0.5rem;
      font-family: "Fira Code", "JetBrains Mono", Menlo, Monaco,
                   Consolas, "Courier New", monospace;
      font-size: 0.95rem;
      border-radius: 4px;
      border: 1px solid #ccc;
      box-sizing: border-box;
      resize: vertical;
      margin-bottom: 0.5rem;
    }

    .rendered-output {
      min-height: 2rem;
      padding: 0.5rem;
      border-radius: 4px;
      border: 1px dashed #ccc;
      background: #fafafa;
      margin-bottom: 0.5rem;
      text-align: center;
    }

    .rendered-output mjx-container {
      display: inline-block;
      margin-left: auto;
      margin-right: auto;
    }

    .controls {
      display: flex;
      justify-content: flex-end;
      gap: 0.5rem;
      margin-bottom: 0.3rem;
    }

    .copy-btn {
      padding: 0.3rem 0.7rem;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      background: #333;
      color: #fff;
      font-size: 0.9rem;
    }

    .copy-btn:active {
      transform: scale(0.97);
    }

    .copy-btn.copied::after {
      content: " ✓";
    }

    .canvas-wrapper {
      border: 1px solid #ccc;
      border-radius: 4px;
      overflow: hidden;
      background: #fff;
    }

    .canvas-block {
      margin-top: 0.75rem;
    }

    .note-canvas {
      display: block;
      width: 100%;
      height: 250px;
      touch-action: none; /* for better touch drawing */
    }

    .clear-canvas {
      margin-top: 0.4rem;
    }



  </style>

  <!-- MathJax for LaTeX rendering -->
  <script>
    window.MathJax = {
      tex: {
        packages: { "[+]": ["ams"] },
        inlineMath: [["\\(","\\)"], ["$","$"]],
        displayMath: [["\\[","\\]"], ["$$","$$"]]
      },
      svg: { fontCache: "global" }
    };
  </script>

  <script id="MathJax-script"
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"
          async></script>
</head>
<body>
  <header>
    <h1>Logic 0–1 – Level 1 Problems</h1>
  </header>

  <main>
    <section>
      <p class="note">
        Level 1 problems check basic recall of definitions, symbols, and
        terminology from the slides. After each group of questions, use the
        LaTeX notes area and drawing pad for working, examples, or doodles.
        Click in a notes box, then use the floating toolbar on the right to
        insert symbols into that box.
      </p>
    </section>

    <!-- 1. Logical Jargon and Symbols -->
    <section class="problem-group" id="group-1">
      <h2>1. Logical Jargon and Symbols</h2>

      <p><strong>(L1.1)</strong> What symbol is used to mean “therefore” in mathematical writing?</p>

      <p><strong>(L1.2)</strong> Write the symbol that abbreviates “if … then …”.</p>

      <p><strong>(L1.3)</strong> Write the symbol that abbreviates the converse implication “only if …”.</p>

      <p><strong>(L1.4)</strong> What abbreviation is commonly used for “if and only if”?</p>

      <p><strong>(L1.5)</strong> Write the symbol for “if and only if”.</p>

      <p><strong>(L1.6)</strong> What is the standard symbol for the denial of an equation \(x = y\)?</p>

      <p><strong>(L1.7)</strong> What is the standard symbol for the denial of membership \(x \in A\)?</p>

      <p><strong>(L1.8)</strong> If we write \(\Sigma \models \tau\), how do we write its denial?</p>

      <!-- Notes + drawing for group 1 -->
      <div class="group-notes">
        <h3>Notes for Group 1</h3>
        <div class="note">
          Click here, then use the right-side toolbar to insert LaTeX.
        </div>
        <textarea class="latex-input"
                  placeholder="e.g.\ \therefore,\ x \Rightarrow y,\ x \notin A"></textarea>
        <div class="rendered-output"></div>
        <div class="controls">
          <button class="copy-btn">Copy problems + notes</button>
        </div>
      </div>

      <div class="canvas-block">
        <div class="note">
          Draw/write here (mouse or touch). Use “Clear drawing” to reset.
        </div>
        <div class="canvas-wrapper">
          <canvas class="note-canvas"></canvas>
        </div>
        <button class="copy-btn clear-canvas">Clear drawing</button>
      </div>
    </section>

    <!-- 2. Sets, Membership, and Extensionality -->
    <section class="problem-group" id="group-2">
      <h2>2. Sets, Membership, and Extensionality</h2>

      <p><strong>(S2.1)</strong> Give the informal definition of a <strong>set</strong>.</p>

      <p><strong>(S2.2)</strong> What do we call the objects that belong to a set?</p>

      <p><strong>(S2.3)</strong> Write the notation that says: “\(t\) is a member of \(A\)”.</p>

      <p><strong>(S2.4)</strong> Write the notation that says: “\(t\) is not a member of \(A\)”.</p>

      <p><strong>(S2.5)</strong> What does the statement \(x = y\) mean in set theory?</p>

      <p><strong>(S2.6)</strong> State the <strong>principle of extensionality</strong> in words.</p>

      <p><strong>(S2.7)</strong> Complete the sentence:
        If \(A = B\), then for any object \(t\), \(t \in A\) iff ______.</p>

      <p><strong>(S2.8)</strong> When are two sets \(A\) and \(B\) equal?</p>

      <!-- Notes + drawing for group 2 -->
      <div class="group-notes">
        <h3>Notes for Group 2</h3>
        <div class="note">
          Click here, then use the right-side toolbar to insert LaTeX.
        </div>
        <textarea class="latex-input"
                  placeholder="e.g.\ A\text{ is a collection of objects },\ t \in A,\ t \notin A"></textarea>
        <div class="rendered-output"></div>
        <div class="controls">
          <button class="copy-btn">Copy problems + notes</button>
        </div>
      </div>

      <div class="canvas-block">
        <div class="note">
          Draw/write here (mouse or touch). Use “Clear drawing” to reset.
        </div>
        <div class="canvas-wrapper">
          <canvas class="note-canvas"></canvas>
        </div>
        <button class="copy-btn clear-canvas">Clear drawing</button>
      </div>
    </section>

    <!-- 3. Adjoining an Element -->
    <section class="problem-group" id="group-3">
      <h2>3. Adjoining an Element</h2>

      <p><strong>(A3.1)</strong> Given a set \(A\) and an object \(t\), what notation is used in the text for the set obtained by adjoining \(t\) to \(A\)?</p>

      <p><strong>(A3.2)</strong> Write a standard set-theoretic expression for this adjoining operation in terms of union and singleton notation.</p>

      <p><strong>(A3.3)</strong> Fill in the equivalence:
        \(t \in A\) iff \(A; t = \underline{\hspace{1.5cm}}\).</p>

      <!-- Notes + drawing for group 3 -->
      <div class="group-notes">
        <h3>Notes for Group 3</h3>
        <div class="note">
          Click here, then use the right-side toolbar to insert LaTeX.
        </div>
        <textarea class="latex-input"
                  placeholder="e.g.\ A; t,\ A \cup \{t\}"></textarea>
        <div class="rendered-output"></div>
        <div class="controls">
          <button class="copy-btn">Copy problems + notes</button>
        </div>
      </div>

      <div class="canvas-block">
        <div class="note">
          Draw/write here (mouse or touch). Use “Clear drawing” to reset.
        </div>
        <div class="canvas-wrapper">
          <canvas class="note-canvas"></canvas>
        </div>
        <button class="copy-btn clear-canvas">Clear drawing</button>
      </div>
    </section>

    <!-- 4. Special Sets: Empty Set, Singletons, Finite Sets -->
    <section class="problem-group" id="group-4">
      <h2>4. Special Sets: Empty Set, Singletons, Finite Sets</h2>

      <p><strong>(E4.1)</strong> What is the standard symbol for the <strong>empty set</strong>?</p>

      <p><strong>(E4.2)</strong> What is a <strong>nonempty</strong> set?</p>

      <p><strong>(E4.3)</strong> Given an object \(x\), what is the notation for the
        <strong>singleton set</strong> whose only member is \(x\)?</p>

      <p><strong>(E4.4)</strong> How do we write a finite set with members
        \(x_1, x_2, \dots, x_n\)?</p>

      <p><strong>(E4.5)</strong> True or False: \(\{x, y\} = \{y, x\}\).</p>

      <!-- Notes + drawing for group 4 -->
      <div class="group-notes">
        <h3>Notes for Group 4</h3>
        <div class="note">
          Click here, then use the right-side toolbar to insert LaTeX.
        </div>
        <textarea class="latex-input"
                  placeholder="e.g.\ \varnothing,\ \{x\},\ \{x_1,\dots,x_n\}"></textarea>
        <div class="rendered-output"></div>
        <div class="controls">
          <button class="copy-btn">Copy problems + notes</button>
        </div>
      </div>

      <div class="canvas-block">
        <div class="note">
          Draw/write here (mouse or touch). Use “Clear drawing” to reset.
        </div>
        <div class="canvas-wrapper">
          <canvas class="note-canvas"></canvas>
        </div>
        <button class="copy-btn clear-canvas">Clear drawing</button>
      </div>
    </section>

    <!-- 5. Infinite Sets and Set-Builder Notation -->
    <section class="problem-group" id="group-5">
      <h2>5. Infinite Sets and Set-Builder Notation</h2>

      <p><strong>(I5.1)</strong> Write the set of natural numbers \(\{0,1,2,\dots\}\) using a standard symbol.</p>

      <p><strong>(I5.2)</strong> Write the set of all integers
        \(\{\dots,-2,-1,0,1,2,\dots\}\) using a standard symbol.</p>

      <p><strong>(I5.3)</strong> Write the general form of <strong>set-builder notation</strong>
        for a set of all objects \(x\) satisfying a condition \(\varphi(x)\).</p>

      <p><strong>(I5.4)</strong> How do we write the set of all elements \(x\) in a set \(A\)
        that satisfy a condition \(\varphi(x)\) using set-builder notation?</p>

      <p><strong>(I5.5)</strong> Using set-builder notation, write the set of all ordered pairs
        \((m,n)\) of natural numbers with \(m < n\).</p>

      <!-- Notes + drawing for group 5 -->
      <div class="group-notes">
        <h3>Notes for Group 5</h3>
        <div class="note">
          Click here, then use the right-side toolbar to insert LaTeX.
        </div>
        <textarea class="latex-input"
                  placeholder="e.g.\ \mathbb{N},\ \mathbb{Z},\ \{x : \varphi(x)\}"></textarea>
        <div class="rendered-output"></div>
        <div class="controls">
          <button class="copy-btn">Copy problems + notes</button>
        </div>
      </div>

      <div class="canvas-block">
        <div class="note">
          Draw/write here (mouse or touch). Use “Clear drawing” to reset.
        </div>
        <div class="canvas-wrapper">
          <canvas class="note-canvas"></canvas>
        </div>
        <button class="copy-btn clear-canvas">Clear drawing</button>
      </div>
    </section>

    <!-- 6. Subsets and Power Sets -->
    <section class="problem-group" id="group-6">
      <h2>6. Subsets and Power Sets</h2>

      <p><strong>(P6.1)</strong> What does it mean for \(A\) to be a <strong>subset</strong> of \(B\)?</p>

      <p><strong>(P6.2)</strong> What is the symbol for “\(A\) is a subset of \(B\)”? </p>

      <p><strong>(P6.3)</strong> Is every set a subset of itself? (Answer “Yes” or “No”.)</p>

      <p><strong>(P6.4)</strong> Is the empty set a subset of every set? (Answer “Yes” or “No”.)</p>

      <p><strong>(P6.5)</strong> In words, what is the <strong>power set</strong> \(\mathcal{P}A\) of a set \(A\)?</p>

      <p><strong>(P6.6)</strong> Write the set-builder definition of the power set \(\mathcal{P}A\).</p>

      <p><strong>(P6.7)</strong> Compute \(\mathcal{P}\varnothing\).</p>

      <p><strong>(P6.8)</strong> Compute \(\mathcal{P}\{\varnothing\}\).</p>

      <!-- Notes + drawing for group 6 -->
      <div class="group-notes">
        <h3>Notes for Group 6</h3>
        <div class="note">
          Click here, then use the right-side toolbar to insert LaTeX.
        </div>
        <textarea class="latex-input"
                  placeholder="e.g.\ A \subseteq B,\ \mathcal{P}A = \{X : X \subseteq A\}"></textarea>
        <div class="rendered-output"></div>
        <div class="controls">
          <button class="copy-btn">Copy problems + notes</button>
        </div>
      </div>

      <div class="canvas-block">
        <div class="note">
          Draw/write here (mouse or touch). Use “Clear drawing” to reset.
        </div>
        <div class="canvas-wrapper">
          <canvas class="note-canvas"></canvas>
        </div>
        <button class="copy-btn clear-canvas">Clear drawing</button>
      </div>
    </section>

    <!-- 7. Union and Intersection (Binary and Big) -->
    <section class="problem-group" id="group-7">
      <h2>7. Union and Intersection (Binary and Big)</h2>

      <p><strong>(U7.1)</strong> In words, what is the union \(A \cup B\) of two sets \(A\) and \(B\)?</p>

      <p><strong>(U7.2)</strong> In words, what is the intersection \(A \cap B\) of two sets \(A\) and \(B\)?</p>

      <p><strong>(U7.3)</strong> When are two sets \(A\) and \(B\) said to be <strong>disjoint</strong>?</p>

      <p><strong>(U7.4)</strong> What does it mean for a collection of sets to be <strong>pairwise disjoint</strong>?</p>

      <p><strong>(U7.5)</strong> Give the set-builder definition of the union
        \(\displaystyle \bigcup A\) of a set \(A\) whose members are themselves sets.</p>

      <p><strong>(U7.6)</strong> Give the set-builder definition of the intersection
        \(\displaystyle \bigcap A\) for a <strong>nonempty</strong> set \(A\) of sets.</p>

      <p><strong>(U7.7)</strong> Let \(A = \{\{0,1,5\}, \{1,6\}, \{1,5\}\}\).
        List the elements of \(\bigcup A\).</p>

      <p><strong>(U7.8)</strong> With the same \(A\) as in (U7.7), list the elements of \(\bigcap A\).</p>

      <!-- Notes + drawing for group 7 -->
      <div class="group-notes">
        <h3>Notes for Group 7</h3>
        <div class="note">
          Click here, then use the right-side toolbar to insert LaTeX.
        </div>
        <textarea class="latex-input"
                  placeholder="e.g.\ \bigcup A = \{x : \exists B \in A\ (x \in B)\}"></textarea>
        <div class="rendered-output"></div>
        <div class="controls">
          <button class="copy-btn">Copy problems + notes</button>
        </div>
      </div>

      <div class="canvas-block">
        <div class="note">
          Draw/write here (mouse or touch). Use “Clear drawing” to reset.
        </div>
        <div class="canvas-wrapper">
          <canvas class="note-canvas"></canvas>
        </div>
        <button class="copy-btn clear-canvas">Clear drawing</button>
      </div>
    </section>

    <!-- 8. Ordered Pairs, Tuples, and Finite Sequences -->
    <section class="problem-group" id="group-8">
      <h2>8. Ordered Pairs, Tuples, and Finite Sequences</h2>

      <p><strong>(T8.1)</strong> State the key property that any definition of an ordered pair \(\langle x,y\rangle\) must satisfy.</p>

      <p><strong>(T8.2)</strong> Write the standard set-theoretic definition of
        \(\langle x,y\rangle\) used in the text.</p>

      <p><strong>(T8.3)</strong> Write the definition of an ordered triple
        \(\langle x,y,z\rangle\) in terms of ordered pairs.</p>

      <p><strong>(T8.4)</strong> Write the recursive definition of an \((n+1)\)-tuple
        \(\langle x_1,\dots,x_n,x_{n+1}\rangle\).</p>

      <p><strong>(T8.5)</strong> What is a <strong>finite sequence</strong> (or string) of members
        of a set \(A\)?</p>

      <!-- Notes + drawing for group 8 -->
      <div class="group-notes">
        <h3>Notes for Group 8</h3>
        <div class="note">
          Click here, then use the right-side toolbar to insert LaTeX.
        </div>
        <textarea class="latex-input"
                  placeholder="e.g.\ \langle x,y\rangle = \{\{x\},\{x,y\}\}"></textarea>
        <div class="rendered-output"></div>
        <div class="controls">
          <button class="copy-btn">Copy problems + notes</button>
        </div>
      </div>

      <div class="canvas-block">
        <div class="note">
          Draw/write here (mouse or touch). Use “Clear drawing” to reset.
        </div>
        <div class="canvas-wrapper">
          <canvas class="note-canvas"></canvas>
        </div>
        <button class="copy-btn clear-canvas">Clear drawing</button>
      </div>
    </section>

    <!-- 9. Cartesian Products and Relations -->
    <section class="problem-group" id="group-9">
      <h2>9. Cartesian Products and Relations</h2>

      <p><strong>(C9.1)</strong> Write the definition of the Cartesian product
        \(A \times B\) using set-builder notation.</p>

      <p><strong>(C9.2)</strong> What is \(A^n\) in terms of ordered tuples?</p>

      <p><strong>(C9.3)</strong> What is a <strong>relation</strong>?</p>

      <p><strong>(C9.4)</strong> What is a <strong>binary relation</strong> on a set \(A\)?</p>

      <p><strong>(C9.5)</strong> Given a relation \(R\), what is the
        <strong>domain</strong> \(\operatorname{dom}R\)?</p>

      <p><strong>(C9.6)</strong> Given a relation \(R\), what is the
        <strong>range</strong> \(\operatorname{ran}R\)?</p>

      <p><strong>(C9.7)</strong> What is the <strong>field</strong> of a relation \(R\)?</p>

      <p><strong>(C9.8)</strong> How is the equality relation on a set \(A\) written
        as a set of ordered pairs?</p>

      <!-- Notes + drawing for group 9 -->
      <div class="group-notes">
        <h3>Notes for Group 9</h3>
        <div class="note">
          Click here, then use the right-side toolbar to insert LaTeX.
        </div>
        <textarea class="latex-input"
                  placeholder="e.g.\ A \times B = \{\langle a,b\rangle : a \in A,\ b \in B\}"></textarea>
        <div class="rendered-output"></div>
        <div class="controls">
          <button class="copy-btn">Copy problems + notes</button>
        </div>
      </div>

      <div class="canvas-block">
        <div class="note">
          Draw/write here (mouse or touch). Use “Clear drawing” to reset.
        </div>
        <div class="canvas-wrapper">
          <canvas class="note-canvas"></canvas>
        </div>
        <button class="copy-btn clear-canvas">Clear drawing</button>
      </div>
    </section>

    <!-- 10. n-ary Relations and Restrictions -->
    <section class="problem-group" id="group-10">
      <h2>10. n-ary Relations and Restrictions</h2>

      <p><strong>(R10.1)</strong> What is an \(n\)-ary relation on a set \(A\)?</p>

      <p><strong>(R10.2)</strong> What is a <strong>unary (1-ary) relation</strong> on a set \(A\)?</p>

      <p><strong>(R10.3)</strong> Given a relation \(R\) on \(A\) and a subset
        \(B \subseteq A\), how do we define the <strong>restriction</strong> of \(R\) to \(B\)?</p>

      <!-- Notes + drawing for group 10 -->
      <div class="group-notes">
        <h3>Notes for Group 10</h3>
        <div class="note">
          Click here, then use the right-side toolbar to insert LaTeX.
        </div>
        <textarea class="latex-input"
                  placeholder="e.g.\ R\upharpoonright B = \{\langle x_1,\dots,x_n\rangle \in R : x_1,\dots,x_n \in B\}"></textarea>
        <div class="rendered-output"></div>
        <div class="controls">
          <button class="copy-btn">Copy problems + notes</button>
        </div>
      </div>

      <div class="canvas-block">
        <div class="note">
          Draw/write here (mouse or touch). Use “Clear drawing” to reset.
        </div>
        <div class="canvas-wrapper">
          <canvas class="note-canvas"></canvas>
        </div>
        <button class="copy-btn clear-canvas">Clear drawing</button>
      </div>
    </section>

    <!-- 11. Functions and Maps -->
    <section class="problem-group" id="group-11">
      <h2>11. Functions and Maps</h2>

      <p><strong>(F11.1)</strong> How is a function \(F\) viewed as a special kind of relation?</p>

      <p><strong>(F11.2)</strong> What does it mean for a relation to be
        <strong>single-valued</strong>?</p>

      <p><strong>(F11.3)</strong> What notation is used to say that a function \(F\)
        maps \(A\) into \(B\)?</p>

      <p><strong>(F11.4)</strong> In that notation, what is the domain of \(F\)?
        What is contained in the range?</p>

      <p><strong>(F11.5)</strong> When do we say that a function \(F\) maps \(A\)
        <strong>onto</strong> \(B\)?</p>

      <p><strong>(F11.6)</strong> When is a function called <strong>one-to-one</strong>?</p>

      <p><strong>(F11.7)</strong> How is the value of \(F\) at an ordered \(n\)-tuple
        \(\langle x_1,\dots,x_n\rangle\) written?</p>

      <!-- Notes + drawing for group 11 -->
      <div class="group-notes">
        <h3>Notes for Group 11</h3>
        <div class="note">
          Click here, then use the right-side toolbar to insert LaTeX.
        </div>
        <textarea class="latex-input"
                  placeholder="e.g.\ F : A \to B,\ F(x_1,\dots,x_n)"></textarea>
        <div class="rendered-output"></div>
        <div class="controls">
          <button class="copy-btn">Copy problems + notes</button>
        </div>
      </div>

      <div class="canvas-block">
        <div class="note">
          Draw/write here (mouse or touch). Use “Clear drawing” to reset.
        </div>
        <div class="canvas-wrapper">
          <canvas class="note-canvas"></canvas>
        </div>
        <button class="copy-btn clear-canvas">Clear drawing</button>
      </div>
    </section>

    <!-- 12. Operations and Identity -->
    <section class="problem-group" id="group-12">
      <h2>12. Operations and Identity</h2>

      <p><strong>(O12.1)</strong> What is an \(n\)-ary operation on a set \(A\)?</p>

      <p><strong>(O12.2)</strong> Give an example of a unary operation on \(\mathbb{N}\)
        mentioned in the text.</p>

      <p><strong>(O12.3)</strong> Give an example of a binary operation on \(\mathbb{N}\)
        mentioned in the text.</p>

      <p><strong>(O12.4)</strong> If \(f\) is an \(n\)-ary operation on \(A\) and
        \(B \subseteq A\), how is the restriction \(g\) of \(f\) to \(B\) defined?</p>

      <p><strong>(O12.5)</strong> What does it mean for a subset \(B\) to be
        <strong>closed under</strong> an \(n\)-ary operation \(f\)?</p>

      <p><strong>(O12.6)</strong> Write the defining equation for the identity function
        \(\operatorname{Id}\) on a set \(A\).</p>

      <p><strong>(O12.7)</strong> Write \(\operatorname{Id}\) on \(A\) as a set of ordered pairs.</p>

      <!-- Notes + drawing for group 12 -->
      <div class="group-notes">
        <h3>Notes for Group 12</h3>
        <div class="note">
          Click here, then use the right-side toolbar to insert LaTeX.
        </div>
        <textarea class="latex-input"
                  placeholder="e.g.\ \operatorname{Id}_A(x) = x,\ \operatorname{Id}_A = \{\langle x,x\rangle : x \in A\}"></textarea>
        <div class="rendered-output"></div>
        <div class="controls">
          <button class="copy-btn">Copy problems + notes</button>
        </div>
      </div>

      <div class="canvas-block">
        <div class="note">
          Draw/write here (mouse or touch). Use “Clear drawing” to reset.
        </div>
        <div class="canvas-wrapper">
          <canvas class="note-canvas"></canvas>
        </div>
        <button class="copy-btn clear-canvas">Clear drawing</button>
      </div>
    </section>

    <!-- 13. Properties of Relations -->
    <section class="problem-group" id="group-13">
      <h2>13. Properties of Relations</h2>

      <p><strong>(PR13.1)</strong> When is a relation \(R\) on a set \(A\)
        <strong>reflexive</strong>?</p>

      <p><strong>(PR13.2)</strong> When is a relation \(R\) on \(A\)
        <strong>symmetric</strong>?</p>

      <p><strong>(PR13.3)</strong> When is a relation \(R\) on \(A\)
        <strong>transitive</strong>?</p>

      <p><strong>(PR13.4)</strong> State the <strong>trichotomy</strong> property for a relation
        \(R\) on a set \(A\).</p>

      <p><strong>(PR13.5)</strong> When is a relation \(R\) an
        <strong>equivalence relation</strong> on \(A\)?</p>

      <p><strong>(PR13.6)</strong> When is a relation \(R\) an
        <strong>ordering relation</strong> on \(A\)?</p>

      <!-- Notes + drawing for group 13 -->
      <div class="group-notes">
        <h3>Notes for Group 13</h3>
        <div class="note">
          Click here, then use the right-side toolbar to insert LaTeX.
        </div>
        <textarea class="latex-input"
                  placeholder="e.g.\ \text{reflexive: } \forall x\in A\ (\langle x,x\rangle \in R)"></textarea>
        <div class="rendered-output"></div>
        <div class="controls">
          <button class="copy-btn">Copy problems + notes</button>
        </div>
      </div>

      <div class="canvas-block">
        <div class="note">
          Draw/write here (mouse or touch). Use “Clear drawing” to reset.
        </div>
        <div class="canvas-wrapper">
          <canvas class="note-canvas"></canvas>
        </div>
        <button class="copy-btn clear-canvas">Clear drawing</button>
      </div>
    </section>

    <!-- 14. Equivalence Classes and Partitions -->
    <section class="problem-group" id="group-14">
      <h2>14. Equivalence Classes and Partitions</h2>

      <p><strong>(EQ14.1)</strong> Given an equivalence relation \(R\) on a set \(A\) and an
        element \(x \in A\), write the definition of the <strong>equivalence class</strong>
        \([x]\).</p>

      <p><strong>(EQ14.2)</strong> In words, what does it mean to say that the
        equivalence classes of \(R\) <strong>partition</strong> \(A\)?</p>

      <p><strong>(EQ14.3)</strong> Fill in the statement:
        For \(x, y \in A\), we have \([x] = [y]\) iff ______.</p>

      <!-- Notes + drawing for group 14 -->
      <div class="group-notes">
        <h3>Notes for Group 14</h3>
        <div class="note">
          Click here, then use the right-side toolbar to insert LaTeX.
        </div>
        <textarea class="latex-input"
                  placeholder="e.g.\ [x] = \{y \in A : \langle x,y\rangle \in R\}"></textarea>
        <div class="rendered-output"></div>
        <div class="controls">
          <button class="copy-btn">Copy problems + notes</button>
        </div>
      </div>

      <div class="canvas-block">
        <div class="note">
          Draw/write here (mouse or touch). Use “Clear drawing” to reset.
        </div>
        <div class="canvas-wrapper">
          <canvas class="note-canvas"></canvas>
        </div>
        <button class="copy-btn clear-canvas">Clear drawing</button>
      </div>
    </section>
  </main>

    <!-- Root for the React symbol popup -->
  <div id="symbol-popup-root"></div>

  <!-- React + ReactDOM + Babel (for JSX in this example) -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
  // ---------- Symbol data (you can expand this later) ----------
  // Will be filled from symbols.json
  window.SYMBOLS = [];

  // ---------- Simple search ----------
  function searchSymbols(symbols, query) {
    const q = query.trim().toLowerCase();
    if (!q) {
      return [...symbols]
        .sort((a, b) => b.priority - a.priority)
        .slice(0, 20);
    }

    return symbols
      .map((s) => {
        const haystack = [
          s.label,
          s.latex,
          ...(s.keywords || []),
          ...(s.categories || [])
        ].join(" ").toLowerCase();

        if (!haystack.includes(q)) return null;

        let score = s.priority ?? 0;

        if (s.latex.toLowerCase().startsWith("\\" + q)) score += 0.7;
        if ((s.keywords || []).some((k) => k.toLowerCase() === q)) score += 0.5;
        if (s.label.toLowerCase() === q) score += 0.4;

        const idx = haystack.indexOf(q);
        if (idx >= 0) score += Math.max(0, 0.3 - idx / 50);

        return { s, score };
      })
      .filter(Boolean)
      .sort((a, b) => b.score - a.score)
      .map((x) => x.s)
      .slice(0, 20);
  }

  // ---------- React popup component ----------
  const SymbolPopup = ({ x, y, initialQuery = "", onSelect, onClose }) => {
    const [query, setQuery] = React.useState(initialQuery);
    const [highlightIndex, setHighlightIndex] = React.useState(0);
    const containerRef = React.useRef(null);
    const inputRef = React.useRef(null);

    const results = React.useMemo(
      () => searchSymbols(window.SYMBOLS || [], query),
      [query]
    );

    React.useEffect(() => {
      setQuery(initialQuery);
      setHighlightIndex(0);
    }, [initialQuery]);

    React.useEffect(() => {
      if (inputRef.current) {
        setTimeout(() => inputRef.current.focus(), 0);
      }
    }, []);

    React.useEffect(() => {
      function handleClickOutside(e) {
        if (!containerRef.current) return;
        if (!containerRef.current.contains(e.target)) {
          onClose();
        }
      }
      document.addEventListener("mousedown", handleClickOutside);
      return () => document.removeEventListener("mousedown", handleClickOutside);
    }, [onClose]);

    const handleKeyDown = (e) => {
      const count = results.length;
      if (e.key === "ArrowDown") {
        e.preventDefault();
        if (count === 0) return;
        setHighlightIndex((prev) => (prev + 1) % count);
      } else if (e.key === "ArrowUp") {
        e.preventDefault();
        if (count === 0) return;
        setHighlightIndex((prev) => (prev - 1 + count) % count);
      } else if (e.key === "Enter") {
        e.preventDefault();
        if (count === 0) return;
        onSelect(results[highlightIndex]);
      } else if (e.key === "Escape") {
        e.preventDefault();
        onClose();
      }
    };

    return (
      <div
        ref={containerRef}
        style={{
          position: "absolute",
          left: x,
          top: y,
          zIndex: 9999,
          minWidth: 260,
          maxWidth: 360,
          background: "#fff",
          border: "1px solid #ddd",
          borderRadius: 6,
          boxShadow: "0 8px 24px rgba(0,0,0,0.12)",
          padding: 8,
          fontFamily:
            'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',
          fontSize: 13
        }}
      >
        <input
          ref={inputRef}
          value={query}
          onChange={(e) => {
            setQuery(e.target.value);
            setHighlightIndex(0);
          }}
          onKeyDown={handleKeyDown}
          placeholder="Search symbol or LaTeX…"
          style={{
            width: "100%",
            boxSizing: "border-box",
            padding: "4px 6px",
            marginBottom: 6,
            borderRadius: 4,
            border: "1px solid #ccc",
            outline: "none"
          }}
        />

        <div style={{ maxHeight: 260, overflowY: "auto" }}>
          {results.map((sym, idx) => (
            <div
              key={sym.latex + idx}
              style={{
                display: "flex",
                alignItems: "center",
                padding: "4px 6px",
                borderRadius: 4,
                background: idx === highlightIndex ? "#eef3ff" : "transparent",
                cursor: "pointer"
              }}
              onMouseDown={(e) => {
                e.preventDefault();
                onSelect(sym);
              }}
            >
              <span
                style={{
                  width: 32,
                  textAlign: "center",
                  fontSize: 18,
                  marginRight: 6
                }}
              >
                {sym.label}
              </span>
              <div
                style={{
                  display: "flex",
                  flexDirection: "column",
                  flex: 1,
                  overflow: "hidden"
                }}
              >
                <span
                  style={{
                    fontFamily: "monospace",
                    fontSize: 12,
                    whiteSpace: "nowrap",
                    overflow: "hidden",
                    textOverflow: "ellipsis"
                  }}
                >
                  {sym.latex}
                </span>
                {sym.keywords && sym.keywords.length > 0 && (
                  <span
                    style={{
                      fontSize: 11,
                      color: "#777",
                      whiteSpace: "nowrap",
                      overflow: "hidden",
                      textOverflow: "ellipsis"
                    }}
                  >
                    {sym.keywords.slice(0, 4).join(", ")}
                  </span>
                )}
              </div>
            </div>
          ))}

          {results.length === 0 && (
            <div
              style={{
                padding: "4px 6px",
                fontSize: 12,
                color: "#888"
              }}
            >
              No matches
            </div>
          )}
        </div>
      </div>
    );
  };

  // ---------- Helper: show popup from vanilla JS ----------
  const popupRoot = ReactDOM.createRoot(
    document.getElementById("symbol-popup-root")
  );

  function showSymbolPopup({ x, y, initialQuery, onSelect }) {
    const handleSelect = (symbol) => {
      onSelect(symbol);
      popupRoot.render(null);
    };
    const handleClose = () => {
      popupRoot.render(null);
    };

    popupRoot.render(
      <SymbolPopup
        x={x}
        y={y}
        initialQuery={initialQuery}
        onSelect={handleSelect}
        onClose={handleClose}
      />
    );
  }

  // ---------- Non-React stuff: MathJax, canvases, copy buttons ----------
  document.addEventListener("DOMContentLoaded", function () {
    // Load symbols.json
    fetch("../../symbols.json")
      .then((res) => res.json())
      .then((data) => {
        // support both { symbols: [...] } and bare [...]
        window.SYMBOLS = Array.isArray(data) ? data : (data.symbols || []);
        console.log("Loaded symbols:", window.SYMBOLS.length);
      })
      .catch((err) => {
        console.error("Failed to load symbols.json", err);
        window.SYMBOLS = []; // fallback
      });

    function renderBlockTeX(textarea, outputElement) {
      const raw = textarea.value.trim();
      if (!raw) {
        outputElement.innerHTML = "";
        return;
      }

      let tex = raw;
      const explicitDisplayOrEnv = /^(\$\$|\\\[|\\begin\{)/.test(raw);
      const looksMultiline = raw.includes("\\\\") || raw.includes("\n");

      if (!explicitDisplayOrEnv) {
        if (looksMultiline) {
          tex = "\\begin{gather*}\n" + raw + "\n\\end{gather*}";
        } else {
          tex = "\\[" + raw + "\\]";
        }
      }

      outputElement.textContent = tex;

      if (window.MathJax && MathJax.typesetPromise) {
        MathJax.typesetPromise([outputElement]).catch((err) =>
          console.error(err)
        );
      }
    }

    function insertAtCursor(textarea, text) {
      if (!textarea) return;
      const start = textarea.selectionStart ?? textarea.value.length;
      const end = textarea.selectionEnd ?? textarea.value.length;
      const value = textarea.value;

      textarea.value = value.slice(0, start) + text + value.slice(end);
      const newPos = start + text.length;

      textarea.focus();
      textarea.selectionStart = textarea.selectionEnd = newPos;
      textarea.dispatchEvent(new Event("input", { bubbles: true }));
    }

    let activeTextarea = null;

    // ---------- Notes textareas: focus, live render, backslash trigger ----------
    const allTextareas = document.querySelectorAll(".latex-input");
    allTextareas.forEach((ta) => {
      ta.addEventListener("focus", () => {
        activeTextarea = ta;
      });
      ta.addEventListener("click", () => {
        activeTextarea = ta;
      });
      ta.addEventListener("input", () => {
        const out = ta.closest(".group-notes").querySelector(".rendered-output");
        renderBlockTeX(ta, out);
      });

      ta.addEventListener("keydown", (e) => {
        if (e.key === "\\") {
          e.preventDefault();

          const rect = ta.getBoundingClientRect();
          const x = rect.left + window.scrollX + 40;
          const y = rect.top + window.scrollY + 20;

          const pos = ta.selectionStart ?? ta.value.length;
          const value = ta.value;

          // Optional: infer initial query based on previous backslash
          let initialQuery = "";
          const lastBackslash = value.lastIndexOf("\\", pos - 1);
          if (lastBackslash !== -1 && lastBackslash < pos) {
            initialQuery = value.slice(lastBackslash + 1, pos);
          }

          showSymbolPopup({
            x,
            y,
            initialQuery,
            onSelect(symbol) {
              // we treat "\" purely as a trigger; we only insert the symbol latex
              insertAtCursor(ta, symbol.latex);
            }
          });
        }
      });

      // initial render (if any default text)
      const out = ta.closest(".group-notes").querySelector(".rendered-output");
      renderBlockTeX(ta, out);
    });

    // ---------- Per-group: copy problems + notes ----------
    const noteGroups = document.querySelectorAll(".group-notes");
    noteGroups.forEach((group) => {
      const section = group.closest(".problem-group");
      const textarea = group.querySelector(".latex-input");
      const button = group.querySelector(".copy-btn");

      button.addEventListener("click", async () => {
        const problems = Array.from(
          section.querySelectorAll(":scope > p")
        ).map((p) => p.textContent.trim());

        const problemBlock =
          "Problems:\n" +
          problems.map((t, i) => `${i + 1}. ${t}`).join("\n") +
          "\n\n";

        const latex = textarea.value.trim();
        const notesBlock = "Notes (LaTeX):\n" + latex + "\n";

        const combined = problemBlock + notesBlock;

        try {
          await navigator.clipboard.writeText(combined);
          button.classList.add("copied");
          setTimeout(() => button.classList.remove("copied"), 1200);
        } catch (err) {
          console.error("Clipboard error:", err);
          alert("Copy failed – your browser may block clipboard access.");
        }
      });
    });

    // ---------- Drawing canvases ----------
    const canvases = document.querySelectorAll(".note-canvas");
    canvases.forEach((canvas) => {
      const ctx = canvas.getContext("2d");
      const clearBtn = canvas.closest(".canvas-block").querySelector(".clear-canvas");

      function resizeCanvas() {
        const rect = canvas.getBoundingClientRect();
        const dpr = window.devicePixelRatio || 1;

        canvas.width = rect.width * dpr;
        canvas.height = rect.height * dpr;

        ctx.setTransform(1, 0, 0, 1, 0, 0);
        ctx.scale(dpr, dpr);

        ctx.lineCap = "round";
        ctx.lineJoin = "round";
        ctx.lineWidth = 2;
      }

      resizeCanvas();
      window.addEventListener("resize", resizeCanvas);

      let drawing = false;
      let lastX = 0;
      let lastY = 0;

      function getPos(evt) {
        const rect = canvas.getBoundingClientRect();
        if (evt.touches && evt.touches[0]) {
          return {
            x: evt.touches[0].clientX - rect.left,
            y: evt.touches[0].clientY - rect.top
          };
        } else {
          return {
            x: evt.clientX - rect.left,
            y: evt.clientY - rect.top
          };
        }
      }

      function startDraw(evt) {
        evt.preventDefault();
        drawing = true;
        const pos = getPos(evt);
        lastX = pos.x;
        lastY = pos.y;
      }

      function draw(evt) {
        if (!drawing) return;
        evt.preventDefault();
        const pos = getPos(evt);
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(pos.x, pos.y);
        ctx.stroke();
        lastX = pos.x;
        lastY = pos.y;
      }

      function endDraw(evt) {
        if (!drawing) return;
        evt.preventDefault();
        drawing = false;
      }

      canvas.addEventListener("mousedown", startDraw);
      canvas.addEventListener("mousemove", draw);
      window.addEventListener("mouseup", endDraw);

      canvas.addEventListener("touchstart", startDraw, { passive: false });
      canvas.addEventListener("touchmove", draw, { passive: false });
      canvas.addEventListener("touchend", endDraw, { passive: false });
      canvas.addEventListener("touchcancel", endDraw, { passive: false });

      clearBtn.addEventListener("click", () => {
        const rect = canvas.getBoundingClientRect();
        ctx.clearRect(0, 0, rect.width, rect.height);
      });
    });
  });
</script>



</body>
</html>
