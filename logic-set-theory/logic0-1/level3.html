<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Logic 0 ‚Äì Level 3</title>

  <!-- Basic layout styles -->
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
                   sans-serif;
      line-height: 1.5;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
    }

    header {
      background: #222;
      color: #fff;
      padding: 1rem 1.5rem;
    }

    header h1 {
      margin: 0;
      font-size: 1.6rem;
    }

    main {
      max-width: 900px;
      margin: 1.5rem auto 3rem;
      padding: 0 1rem 2rem;
      background: #fff;
      box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.08);
      border-radius: 8px;
    }

    section {
      margin-bottom: 2rem;
    }

    h2 {
      margin-top: 1.5rem;
      margin-bottom: 0.5rem;
      font-size: 1.3rem;
    }

    h3 {
      margin-top: 1rem;
      margin-bottom: 0.4rem;
      font-size: 1.1rem;
    }

    .note {
      font-size: 0.9rem;
      color: #555;
      margin-bottom: 0.8rem;
    }

    .problem-group {
      border-top: 1px solid #eee;
      padding-top: 1.25rem;
      margin-top: 1.25rem;
    }

    .problem-group:first-of-type {
      border-top: none;
      padding-top: 0;
      margin-top: 0.5rem;
    }

    .latex-input {
      width: 100%;
      min-height: 70px;
      padding: 0.5rem;
      font-family: "Fira Code", "JetBrains Mono", Menlo, Monaco,
                   Consolas, "Courier New", monospace;
      font-size: 0.95rem;
      border-radius: 4px;
      border: 1px solid #ccc;
      box-sizing: border-box;
      resize: vertical;
      margin-bottom: 0.5rem;
    }

    .rendered-output {
      min-height: 2rem;
      padding: 0.5rem;
      border-radius: 4px;
      border: 1px dashed #ccc;
      background: #fafafa;
      margin-bottom: 0.5rem;
      text-align: center;
    }

    .rendered-output mjx-container {
      display: inline-block;
      margin-left: auto;
      margin-right: auto;
    }

    .controls {
      display: flex;
      justify-content: flex-end;
      gap: 0.5rem;
      margin-bottom: 0.3rem;
    }

    .copy-btn {
      padding: 0.3rem 0.7rem;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      background: #333;
      color: #fff;
      font-size: 0.9rem;
    }

    .copy-btn:active {
      transform: scale(0.97);
    }

    .copy-btn.copied::after {
      content: " ‚úì";
    }

    .canvas-wrapper {
      border: 1px solid #ccc;
      border-radius: 4px;
      overflow: hidden;
      background: #fff;
    }

    .canvas-block {
      margin-top: 0.75rem;
    }

    .note-canvas {
      display: block;
      width: 100%;
      height: 250px;
      touch-action: none; /* for better touch drawing */
    }

    .clear-canvas {
      margin-top: 0.4rem;
    }



  </style>

  <!-- MathJax for LaTeX rendering -->
  <script>
    window.MathJax = {
      tex: {
        packages: { "[+]": ["ams"] },
        inlineMath: [["\\(","\\)"], ["$","$"]],
        displayMath: [["\\[","\\]"], ["$$","$$"]]
      },
      svg: { fontCache: "global" }
    };
  </script>

  <script id="MathJax-script"
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"
          async></script>
</head>
<body>
  <header>
    <h1>Logic 0 ‚Äì Level 3 Problems</h1>
  </header>

<main>
  <section>
    <p class="note">
      Level 3 (Apply) problems ask you to use the definitions, notation, and
      lemmas from the slides to compute, construct examples, and check
      properties. After each group of questions, use the LaTeX notes area
      and drawing pad for working, examples, or doodles.
    </p>
  </section>

  <!-- 1. Preliminaries and Notation (‚Üí, ‚Üî, ‚à¥, negation) -->
  <section class="problem-group" id="group-1">
    <h2>1. Preliminaries and Notation (\(\Rightarrow\), \(\Leftrightarrow\), \(\therefore\), negation)</h2>

    <p><strong>(A1.1)</strong>
      Let \(P(x)\) be ‚Äú\(x > 0\)‚Äù and \(Q(x)\) be ‚Äú\(x^2 > 1\)‚Äù.
      Write the statement
    </p>
    <blockquote>
      ‚ÄúIf \(x>0\), then \(x^2>1\). Therefore, \(x>1\).‚Äù
    </blockquote>
    <p>
      using the implication and therefore symbols from the notes.
    </p>

    <p><strong>(A1.2)</strong>
      Translate each of the following into logical notation using
      \(\Rightarrow\), \(\Leftarrow\), or \(\Leftrightarrow\) as appropriate.
    </p>
    <ol>
      <li>‚Äú\(P\) only if \(Q\).‚Äù</li>
      <li>‚Äú\(P\) if and only if \(Q\).‚Äù</li>
      <li>‚Äú\(Q\) if \(P\).‚Äù</li>
    </ol>

    <p><strong>(A1.3)</strong>
      Given a set of sentences \(\Sigma\) and a sentence \(\tau\), write a
      concrete example (with simple propositional formulas) where
      \(\Sigma \models \tau\) holds, and then write the formula expressing
      its negation \(\Sigma \not\models \tau\).
    </p>

    <p><strong>(A1.4)</strong>
      Write the negations of the following statements using the shortcut
      symbols from the notes (not just English ‚Äúnot‚Äù):
    </p>
    <ol>
      <li>\(x \in A\)</li>
      <li>\(x = y\)</li>
      <li>\(x \in A \cap B\)</li>
    </ol>

    <!-- Notes + drawing for group 1 -->
    <div class="group-notes">
      <h3>Notes for Group 1</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
        placeholder="e.g.\ P \Rightarrow Q,\ P \Leftrightarrow Q,\ \Sigma \models \tau,\ \Sigma \not\models \tau,\ x \notin A"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 2. Sets and Extensionality -->
  <section class="problem-group" id="group-2">
    <h2>2. Sets and Extensionality</h2>

    <p><strong>(A2.1)</strong>
      Decide whether each pair of sets is equal. Use the extensionality idea
      (‚Äúsame elements‚Äù) explicitly in your reasoning.
    </p>
    <ol>
      <li>\(A = \{0,1,2\}\), \(B = \{2,1,0\}\)</li>
      <li>\(C = \{n \in \mathbb{Z} \mid n^2 < 4\}\),
          \(D = \{-1,0,1\}\)</li>
      <li>\(E = \{2n \mid n \in \mathbb{Z}\}\),
          \(F = \{m \in \mathbb{Z} \mid m \text{ is even}\}\)</li>
    </ol>

    <p><strong>(A2.2)</strong>
      Construct two different <em>descriptions</em> of the same set, one in
      roster form and one in set-builder form, and then explicitly justify
      that they define the same set by checking ‚Äúfor all \(t\),
      \(t \in A \Leftrightarrow t \in B\)‚Äù.
    </p>

    <p><strong>(A2.3)</strong>
      Give an example of two different sets \(A\) and \(B\) such that:
    </p>
    <ul>
      <li>There is at least one element in \(A\) but not in \(B\).</li>
      <li>There is at least one element in \(B\) but not in \(A\).</li>
    </ul>
    <p>
      Verify using extensionality that \(A \neq B\).
    </p>

    <!-- Notes + drawing for group 2 -->
    <div class="group-notes">
      <h3>Notes for Group 2</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
        placeholder="e.g.\ t \in A \Leftrightarrow t \in B,\ \{n\in\mathbb{Z} : n^2<4\} = \{-1,0,1\}"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 3. Adjoining an Element -->
  <section class="problem-group" id="group-3">
    <h2>3. Adjoining an Element</h2>

    <p><strong>(A3.1)</strong>
      Let \(A = \{1,3,5\}\).
    </p>
    <ol>
      <li>Compute \(A;3\).</li>
      <li>Compute \(A;4\).</li>
      <li>
        Decide in which case \(A;t = A\) and in which case \(A;t \neq A\),
        and explain using Proposition 3.2.
      </li>
    </ol>

    <p><strong>(A3.2)</strong>
      Construct a set \(A\) and two distinct elements \(s,t\) such that:
    </p>
    <ul>
      <li>\(A;s = A\),</li>
      <li>\(A;t \neq A\).</li>
    </ul>
    <p>
      Explain what this tells you about membership of \(s\) and \(t\) in \(A\).
    </p>

    <p><strong>(A3.3)</strong>
      Let \(A = \{\{0\}, 1\}\) and \(t = \{1\}\).
      Compute \(A;t\) explicitly and say which new element appears (if any).
    </p>

    <!-- Notes + drawing for group 3 -->
    <div class="group-notes">
      <h3>Notes for Group 3</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
        placeholder="e.g.\ A ; t = A \cup \{t\},\ t \in A \Leftrightarrow A;t = A,\ A = \{1,3,5\}"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 4. Common Sets and Notation -->
  <section class="problem-group" id="group-4">
    <h2>4. Common Sets and Notation</h2>

    <p><strong>(A4.1)</strong>
      Classify each of the following numbers as belonging to \(\mathbb{N}\),
      to \(\mathbb{Z}\setminus\mathbb{N}\), or to neither (using the conventions
      of the notes for \(\mathbb{N}\) and \(\mathbb{Z}\)):
      \(-3,\ -1,\ 0,\ 1,\ 2,\ \tfrac{1}{2}\).
    </p>

    <p><strong>(A4.2)</strong>
      Write all elements of each of the following sets:
    </p>
    <ol>
      <li>\(\{0,1\}\)</li>
      <li>\(\{-1,0,1\}\)</li>
      <li>\(\{n \in \mathbb{Z} \mid -2 \le n \le 2\}\)</li>
    </ol>
    <p>
      Then identify which of them are subsets of \(\mathbb{N}\).
    </p>

    <p><strong>(A4.3)</strong>
      Give one example each of:
    </p>
    <ol>
      <li>An empty set described via a property.</li>
      <li>A non-empty singleton.</li>
      <li>A three-element set that contains \(\varnothing\) as an element.</li>
    </ol>
    <p>
      Write them in roster form.
    </p>

    <!-- Notes + drawing for group 4 -->
    <div class="group-notes">
      <h3>Notes for Group 4</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
        placeholder="e.g.\ \mathbb{N} = \{0,1,2,\dots\},\ \mathbb{Z} = \{\dots,-1,0,1,\dots\},\ \varnothing"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 5. Set-builder Notation -->
  <section class="problem-group" id="group-5">
    <h2>5. Set-builder Notation</h2>

    <p><strong>(A5.1)</strong>
      Rewrite each set in set-builder notation:
    </p>
    <ol>
      <li>\(\{0,2,4,6,\dots\}\)</li>
      <li>\(\{\dots, -3,-1,1,3,5,\dots\}\)</li>
      <li>\(\{1,4,9,16,\dots\}\)</li>
    </ol>
    <p>
      Be explicit about the domain (e.g. \(\mathbb{N}\), \(\mathbb{Z}\), etc.).
    </p>

    <p><strong>(A5.2)</strong>
      Decide whether each number belongs to the set
      \[
        A = \{x \in \mathbb{Z} \mid x = 2k+1 \text{ for some } k \in \mathbb{Z}\}.
      \]
    </p>
    <ol>
      <li>\(-2\)</li>
      <li>\(-1\)</li>
      <li>\(0\)</li>
      <li>\(7\)</li>
    </ol>
    <p>
      Explain your reasoning by explicitly producing (or failing to produce)
      the required \(k\).
    </p>

    <p><strong>(A5.3)</strong>
      Let
      \[
        B = \{\langle m,n\rangle \mid m < n \text{ in } \mathbb{N}\}.
      \]
      List all elements of \(B\) whose coordinates are \(\le 3\)
      (i.e., with \(m,n \le 3\)).
    </p>

    <p><strong>(A5.4)</strong>
      Describe in set-builder notation the set of all rational numbers of the
      form \(\frac{2k+1}{2n}\) with \(k,n \in \mathbb{Z}\) and \(n \neq 0\).
      (You don‚Äôt need to simplify the description.)
    </p>

    <!-- Notes + drawing for group 5 -->
    <div class="group-notes">
      <h3>Notes for Group 5</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
        placeholder="e.g.\ \{2k : k\in\mathbb{N}\},\ \{2k+1 : k\in\mathbb{Z}\},\ B = \{\langle m,n\rangle : m<n\}"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 6. Subsets and Power Sets -->
  <section class="problem-group" id="group-6">
    <h2>6. Subsets and Power Sets</h2>

    <p><strong>(A6.1)</strong>
      Let \(A = \{0,1,2\}\) and \(B = \{1,2,3\}\).
    </p>
    <ol>
      <li>List all elements of \(\mathcal{P}(A)\).</li>
      <li>Decide which subsets of \(A\) are also subsets of \(B\).</li>
      <li>Determine whether \(A \subseteq B\) and whether \(B \subseteq A\).</li>
    </ol>

    <p><strong>(A6.2)</strong>
      Compute:
    </p>
    <ol>
      <li>\(\mathcal{P}(\varnothing)\)</li>
      <li>\(\mathcal{P}(\{\varnothing\})\)</li>
      <li>\(\mathcal{P}(\{0,\varnothing\})\)</li>
    </ol>
    <p>
      Be very explicit about what the <em>elements</em> of each power set are.
    </p>

    <p><strong>(A6.3)</strong>
      Let \(C = \{a,b\}\). Without listing all elements, determine
      \(|\mathcal{P}(C)|\), the number of elements in \(\mathcal{P}(C)\).
      Then verify by actually listing \(\mathcal{P}(C)\).
    </p>

    <p><strong>(A6.4)</strong>
      Give an example of sets \(D\) and \(E\) such that:
    </p>
    <ul>
      <li>\(D \subseteq E\),</li>
      <li>but ‚Äú\(\mathcal{P}(D)\) is <em>not</em> a subset of \(\mathcal{P}(E)\)‚Äù
          is impossible.</li>
    </ul>
    <p>
      Explain why in fact \(\mathcal{P}(D) \subseteq \mathcal{P}(E)\) must always
      hold if \(D \subseteq E\), by applying the definitions.
    </p>

    <!-- Notes + drawing for group 6 -->
    <div class="group-notes">
      <h3>Notes for Group 6</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
        placeholder="e.g.\ \mathcal{P}(A),\ \mathcal{P}(\varnothing),\ \mathcal{P}(\{\varnothing\}),\ D \subseteq E \Rightarrow \mathcal{P}(D)\subseteq\mathcal{P}(E)"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 7. Union and Intersection (including families) -->
  <section class="problem-group" id="group-7">
    <h2>7. Union and Intersection (including families)</h2>

    <p><strong>(A7.1)</strong>
      Let \(A = \{0,1,2\}\) and \(B = \{2,3,4\}\).
    </p>
    <ol>
      <li>Compute \(A \cup B\).</li>
      <li>Compute \(A \cap B\).</li>
      <li>Determine whether \(A\) and \(B\) are disjoint.</li>
    </ol>

    <p><strong>(A7.2)</strong>
      Let \(X = \{1,2,3,4,5,6\}\) and define:
    </p>
    <ul>
      <li>\(A_1 = \{1,2\}\)</li>
      <li>\(A_2 = \{3,4\}\)</li>
      <li>\(A_3 = \{4,5\}\)</li>
    </ul>
    <ol>
      <li>Are \(\{A_1,A_2,A_3\}\) <em>pairwise disjoint</em>?</li>
      <li>Compute \(\bigcup_{i=1}^3 A_i\) and \(\bigcap_{i=1}^3 A_i\).</li>
    </ol>

    <p><strong>(A7.3)</strong>
      Let \(\mathcal{A} = \{\{0,1\}, \{1,2\}, \{1,2,3\}\}\).
    </p>
    <ol>
      <li>Compute \(\bigcup \mathcal{A}\).</li>
      <li>Compute \(\bigcap \mathcal{A}\).</li>
      <li>
        Give a short explanation of why each element is (or is not) in these sets,
        using the definitions of union and intersection of a family.
      </li>
    </ol>

    <p><strong>(A7.4)</strong>
      For each \(n \in \mathbb{N}\), let
      \(I_n = \{n, n+1, n+2,\dots\}\subseteq \mathbb{N}\).
    </p>
    <ol>
      <li>Describe \(\bigcup_{n\in\mathbb{N}} I_n\).</li>
      <li>Describe \(\bigcap_{n\in\mathbb{N}} I_n\).</li>
    </ol>
    <p>
      Your answers should be explicit subsets of \(\mathbb{N}\) (e.g.,
      \(\{0,1,2,\dots\}\), or ‚Äúthe empty set‚Äù, etc.).
    </p>

    <!-- Notes + drawing for group 7 -->
    <div class="group-notes">
      <h3>Notes for Group 7</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
        placeholder="e.g.\ x \in A \cup B,\ x \in A \cap B,\ \bigcup \mathcal{A},\ \bigcap \mathcal{A},\ I_n = \{n,n+1,\dots\}"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 8. Ordered Pairs and Sequences -->
  <section class="problem-group" id="group-8">
    <h2>8. Ordered Pairs and Sequences</h2>

    <p><strong>(A8.1)</strong>
      Using Kuratowski‚Äôs definition \(\langle x,y\rangle := \{\{x\},\{x,y\}\}\):
    </p>
    <ol>
      <li>Compute \(\langle 1,2\rangle\) as a set.</li>
      <li>Compute \(\langle 2,1\rangle\) as a set.</li>
      <li>
        Show that these two sets are different (by exhibiting an element that
        belongs to one but not the other).
      </li>
    </ol>

    <p><strong>(A8.2)</strong>
      Write the following sequences as nested ordered pairs according to the
      recursive definition:
    </p>
    <ol>
      <li>\(\langle a,b,c\rangle\)</li>
      <li>\(\langle 0,1,2,3\rangle\)</li>
    </ol>
    <p>
      You don‚Äôt have to simplify the sets; you just need the correct nested
      structure.
    </p>

    <p><strong>(A8.3)</strong>
      Let \(S = \langle a,b,c,d\rangle\).
    </p>
    <ol>
      <li>List all segments of \(S\).</li>
      <li>Identify which of these are initial segments.</li>
      <li>Identify which initial segments are proper initial segments.</li>
    </ol>

    <p><strong>(A8.4)</strong>
      Suppose
      \[
        \langle x_1,x_2,x_3,x_4\rangle
        =
        \langle y_1,y_2,y_3,y_4,y_5\rangle.
      \]
      Using the idea behind Lemma 0A (even if you don‚Äôt reproduce the proof),
      explain what you can conclude about the relationship between the first
      four \(x_i\)‚Äôs and the first four \(y_j\)‚Äôs.
    </p>

    <!-- Notes + drawing for group 8 -->
    <div class="group-notes">
      <h3>Notes for Group 8</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
        placeholder="e.g.\ \langle x,y\rangle = \{\{x\},\{x,y\}\},\ \langle a,b,c\rangle,\ \text{segments of }\langle a,b,c,d\rangle,\ \text{Lemma 0A}"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 9. Cartesian Products and Relations -->
  <section class="problem-group" id="group-9">
    <h2>9. Cartesian Products and Relations</h2>

    <p><strong>(A9.1)</strong>
      Let \(A = \{0,1\}\) and \(B = \{a,b,c\}\).
    </p>
    <ol>
      <li>List all elements of \(A \times B\).</li>
      <li>List all elements of \(B \times A\).</li>
      <li>Explain how these two products differ.</li>
    </ol>

    <p><strong>(A9.2)</strong>
      Let \(C = \{0,1,2\}\). Describe all elements of \(C^2\) and \(C^3\) in
      roster form.
    </p>

    <p><strong>(A9.3)</strong>
      Define a relation \(R\) on \(\{0,1,2\}\) by
      \[
        R = \{\langle 0,1\rangle, \langle 1,2\rangle, \langle 0,2\rangle\}.
      \]
    </p>
    <ol>
      <li>Find \(\operatorname{dom}(R)\), \(\operatorname{ran}(R)\),
          and \(\operatorname{fld}(R)\).</li>
      <li>Decide whether \(\langle 2,1\rangle\) is in \(R\).</li>
    </ol>

    <p><strong>(A9.4)</strong>
      Let \(S\) be the strict order \((<)\) on \(\{0,1,2,3\}\)
      (as a set of ordered pairs). Explicitly write out all pairs in \(S\).
    </p>
    <ol>
      <li>Compute \(\operatorname{dom}(S)\), \(\operatorname{ran}(S)\).</li>
      <li>Check whether \(\operatorname{fld}(S)\) is the whole set
          \(\{0,1,2,3\}\).</li>
    </ol>

    <p><strong>(A9.5)</strong>
      Let \(R\) be the usual strict order on \(\mathbb{N}\), and let
      \(B = \{2,3,4\}\).
    </p>
    <ol>
      <li>Describe \(R \upharpoonright B\) as a subset of \(B^2\).</li>
      <li>
        Check that this is the same as the strict order relation ‚Äú\(<\)‚Äù
        restricted to \(\{2,3,4\}\).
      </li>
    </ol>

    <!-- Notes + drawing for group 9 -->
    <div class="group-notes">
      <h3>Notes for Group 9</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
        placeholder="e.g.\ A \times B,\ C^2,\ C^3,\ \operatorname{dom}R,\ \operatorname{ran}R,\ R\upharpoonright B,\ \text{strict order on }\{0,1,2,3\}"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 10. Functions and Operations -->
  <section class="problem-group" id="group-10">
    <h2>10. Functions and Operations</h2>

    <p><strong>(A10.1)</strong>
      For each relation \(F\) on \(\{0,1,2\}\), decide whether \(F\) is a
      function. If it is a function, identify its domain and range.
    </p>
    <ol>
      <li>\(F_1 = \{\langle 0,0\rangle,\langle 1,1\rangle,\langle 2,2\rangle\}\)</li>
      <li>\(F_2 = \{\langle 0,1\rangle,\langle 0,2\rangle\}\)</li>
      <li>\(F_3 = \{\langle 0,1\rangle,\langle 1,1\rangle,\langle 2,1\rangle\}\)</li>
    </ol>

    <p><strong>(A10.2)</strong>
      Let \(f:\mathbb{Z}\to\mathbb{Z}\) be defined by \(f(n)=2n\).
    </p>
    <ol>
      <li>Is \(f\) one-to-one? Justify.</li>
      <li>Is \(f\) onto \(\mathbb{Z}\)? Justify.</li>
      <li>Is \(f\) onto \(\{2n\mid n\in\mathbb{Z}\}\)? Explain.</li>
    </ol>

    <p><strong>(A10.3)</strong>
      Let \(g:\mathbb{Z}\to\mathbb{Z}\) be defined by \(g(n)=n^2\).
    </p>
    <ol>
      <li>Is \(g\) one-to-one?</li>
      <li>Is \(g\) onto \(\mathbb{Z}\)?</li>
      <li>Is \(g\) onto \(\{n^2\mid n\in\mathbb{Z}\}\)?</li>
    </ol>
    <p>
      Answer each by applying the definitions (domain, range, one-to-one, onto).
    </p>

    <p><strong>(A10.4)</strong>
      Let \(+\) be the usual addition on \(\mathbb{Z}\).
      Consider the subset \(B = \mathbb{N}\subseteq \mathbb{Z}\).
    </p>
    <ol>
      <li>
        Explain why \(\mathbb{N}\) is closed under the operation \(+\)
        (viewed as a binary operation on \(\mathbb{Z}\)).
      </li>
      <li>
        Describe the restricted operation \(+\upharpoonright (\mathbb{N}^2)\)
        as a binary operation on \(\mathbb{N}\).
      </li>
      <li>
        Give an example of a subset \(C\subseteq \mathbb{Z}\) that is
        <em>not</em> closed under \(+\), and explain why the restriction to \(C\)
        fails to be an operation on \(C\).
      </li>
    </ol>

    <p><strong>(A10.5)</strong>
      Define a unary operation \(h:\mathbb{Z}\to\mathbb{Z}\) by \(h(n) = n+1\).
      Let \(D = \{0,1,2\}\).
    </p>
    <ol>
      <li>
        Compute \(h\upharpoonright D\): list all pairs
        \(\langle x,h(x)\rangle\) with \(x\in D\).
      </li>
      <li>Is \(D\) closed under \(h\)?</li>
      <li>
        According to Proposition 10.5, is \(h\upharpoonright D\) an operation
        on \(D\)? Explain.
      </li>
    </ol>

    <!-- Notes + drawing for group 10 -->
    <div class="group-notes">
      <h3>Notes for Group 10</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
        placeholder="e.g.\ F \text{ is a function},\ f(n)=2n,\ g(n)=n^2,\ \text{closed under }+,\ h\upharpoonright D"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 11. Standard Classes of Relations -->
  <section class="problem-group" id="group-11">
    <h2>11. Standard Classes of Relations</h2>

    <p><strong>(A11.1)</strong>
      On the set \(A = \{1,2,3\}\), consider the following relations
      (each is a subset of \(A^2\)):
    </p>
    <ol>
      <li>\(R_1 = \{\langle 1,1\rangle,\langle 2,2\rangle,\langle 3,3\rangle\}\)</li>
      <li>\(R_2 = \{\langle 1,2\rangle,\langle 2,1\rangle\}\)</li>
      <li>\(R_3 = \{\langle 1,2\rangle,\langle 2,3\rangle,\langle 1,3\rangle\}\)</li>
    </ol>
    <p>
      For each relation, decide whether it is:
    </p>
    <ul>
      <li>reflexive on \(A\),</li>
      <li>symmetric,</li>
      <li>transitive.</li>
    </ul>
    <p>
      Show <em>how</em> you are applying each definition.
    </p>

    <p><strong>(A11.2)</strong>
      On \(\mathbb{Z}\), define the relation \(R\) by ‚Äú\(a R b\) iff \(a \le b\)‚Äù.
    </p>
    <ol>
      <li>Is \(R\) reflexive on \(\mathbb{Z}\)?</li>
      <li>Is \(R\) symmetric?</li>
      <li>Is \(R\) transitive?</li>
      <li>Does \(R\) satisfy the trichotomy property?</li>
    </ol>
    <p>
      Explain each answer by checking the appropriate condition.
    </p>

    <p><strong>(A11.3)</strong>
      On \(\mathbb{Z}\), define the relation \(S\) by ‚Äú\(a S b\) iff \(a < b\)‚Äù.
    </p>
    <ol>
      <li>Does \(S\) satisfy trichotomy?</li>
      <li>Is \(S\) an ordering relation (strict order) in the sense of the notes?</li>
      <li>Does \(S\) define an equivalence relation?</li>
    </ol>
    <p>
      Apply the formal properties to justify your answers.
    </p>

    <!-- Notes + drawing for group 11 -->
    <div class="group-notes">
      <h3>Notes for Group 11</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
        placeholder="e.g.\ \text{reflexive},\ \text{symmetric},\ \text{transitive},\ \text{trichotomy},\ a\le b,\ a<b"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 12. Equivalence Classes -->
  <section class="problem-group" id="group-12">
    <h2>12. Equivalence Classes</h2>

    <p><strong>(A12.1)</strong>
      On \(\mathbb{Z}\), define \(a \sim b\) iff \(a-b\) is divisible by \(3\).
    </p>
    <ol>
      <li>Compute the equivalence classes \([0]\), \([1]\), and \([2]\).</li>
      <li>
        Show that any integer belongs to exactly one of these three classes
        (at least informally).
      </li>
      <li>
        Check that the three classes are disjoint and their union is \(\mathbb{Z}\),
        applying the ‚Äúpartition‚Äù idea from the notes.
      </li>
    </ol>

    <p><strong>(A12.2)</strong>
      On \(\mathbb{R}\setminus\{0\}\), define \(x \approx y\) iff
      \(\frac{x}{y}\) is positive (i.e., \(x\) and \(y\) have the same sign).
    </p>
    <ol>
      <li>Describe the equivalence classes \([1]\) and \([-1]\).</li>
      <li>Argue that there are exactly two equivalence classes.</li>
      <li>
        Explain why these equivalence classes form a partition of
        \(\mathbb{R}\setminus\{0\}\).
      </li>
    </ol>

    <p><strong>(A12.3)</strong>
      Let \(A = \{1,2,3,4\}\) and define \(a \sim b\) iff \(a\) and \(b\) have
      the same parity (both even or both odd).
    </p>
    <ol>
      <li>List all equivalence classes.</li>
      <li>Verify that every element of \(A\) lies in exactly one class.</li>
      <li>
        Show that \([1]=[3]\) but \([1]\neq[2]\), applying the characterization
        from Proposition 12.2.
      </li>
    </ol>

    <!-- Notes + drawing for group 12 -->
    <div class="group-notes">
      <h3>Notes for Group 12</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
        placeholder="e.g.\ [x] = \{y\in A : \langle x,y\rangle\in R\},\ a\sim b \iff 3 \mid (a-b),\ x\approx y \iff x/y>0,\ \text{parity classes on }\{1,2,3,4\}"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>
</main>


  <!-- Root for the React symbol popup -->
  <div id="symbol-popup-root"></div>

  <!-- React + ReactDOM + Babel (for JSX in this example) -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- React + JSX: ONLY the popup component + showSymbolPopup -->
  <script type="text/babel" data-presets="env,react">
    // ---------- Symbol data (you can expand this later) ----------
    window.SYMBOLS = [];
    window.RECENT_SYMBOLS = [];

    // ---------- Simple search ----------
    function searchSymbols(symbols, query) {
      const q = query.trim().toLowerCase();

      const recentList = Array.isArray(window.RECENT_SYMBOLS)
        ? window.RECENT_SYMBOLS
        : [];
      const recentSet = new Set(recentList);

      // ---------- Case 1: empty query ‚Üí show recent first ----------
      if (!q) {
        const seen = new Set();
        const recent = [];
        const others = [];

        // 1) Put recents first, in recency order
        for (const latex of recentList) {
          const sym = symbols.find((s) => s.latex === latex);
          if (sym && !seen.has(sym.latex)) {
            recent.push(sym);
            seen.add(sym.latex);
          }
        }

        // 2) Then all other symbols, sorted by priority
        for (const s of symbols) {
          if (!seen.has(s.latex)) {
            others.push(s);
          }
        }

        others.sort((a, b) => (b.priority || 0) - (a.priority || 0));

        return [...recent, ...others].slice(0, 20);
      }

      // ---------- Case 2: non-empty query ‚Üí scoring with recency boost ----------
      return symbols
        .map((s) => {
          const haystack = [
            s.label,
            s.latex,
            ...(s.keywords || []),
            ...(s.categories || [])
          ].join(" ").toLowerCase();

          if (!haystack.includes(q)) return null;

          let score = s.priority || 0;

          // Strong boost if this is a recent symbol
          const recIndex = recentList.indexOf(s.latex);
          if (recIndex !== -1) {
            const recencyWeight = 1.0 + (recentList.length - recIndex) * 0.05;
            score += recencyWeight;
          }

          if (s.latex.toLowerCase().startsWith("\\" + q)) score += 0.7;
          if ((s.keywords || []).some((k) => k.toLowerCase() === q)) score += 0.5;
          if (s.label.toLowerCase() === q) score += 0.4;

          const idx = haystack.indexOf(q);
          if (idx >= 0) score += Math.max(0, 0.3 - idx / 50);

          return { s, score };
        })
        .filter(Boolean)
        .sort((a, b) => b.score - a.score)
        .map((x) => x.s)
        .slice(0, 20);
    }


    // ---------- React popup component ----------
    const SymbolPopup = ({ x, y, initialQuery = "", onSelect, onClose }) => {
        const [query, setQuery] = React.useState("");
        const [highlightIndex, setHighlightIndex] = React.useState(0);
        const containerRef = React.useRef(null);
        const inputRef = React.useRef(null);

        const results = React.useMemo(
          () => searchSymbols(window.SYMBOLS || [], query),
          [query]
        );

        React.useEffect(() => {
          if (inputRef.current) {
            setTimeout(() => inputRef.current.focus(), 0);
          }
        }, []);

      React.useEffect(() => {
        if (inputRef.current) {
          setTimeout(() => inputRef.current.focus(), 0);
        }
      }, []);

      React.useEffect(() => {
        function handleClickOutside(e) {
          if (!containerRef.current) return;
          if (!containerRef.current.contains(e.target)) {
            onClose();
          }
        }
        document.addEventListener("mousedown", handleClickOutside);
        return () => document.removeEventListener("mousedown", handleClickOutside);
      }, [onClose]);

      const handleKeyDown = (e) => {
        const count = results.length;
        if (e.key === "ArrowDown") {
          e.preventDefault();
          if (count === 0) return;
          setHighlightIndex((prev) => (prev + 1) % count);
        } else if (e.key === "ArrowUp") {
          e.preventDefault();
          if (count === 0) return;
          setHighlightIndex((prev) => (prev - 1 + count) % count);
        } else if (e.key === "Enter") {
          e.preventDefault();
          if (count === 0) return;
          onSelect(results[highlightIndex]);
        } else if (e.key === "Escape") {
          e.preventDefault();
          onClose();
        }
      };

      return (
        <div
          ref={containerRef}
          style={{
            position: "absolute",
            left: x,
            top: y,
            zIndex: 9999,
            minWidth: 260,
            maxWidth: 360,
            background: "#fff",
            border: "1px solid #ddd",
            borderRadius: 6,
            boxShadow: "0 8px 24px rgba(0,0,0,0.12)",
            padding: 8,
            fontFamily:
              'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',
            fontSize: 13
          }}
        >
          <input
            ref={inputRef}
            value={query}
            onChange={(e) => {
              setQuery(e.target.value);
              setHighlightIndex(0);
            }}
            onKeyDown={handleKeyDown}
            placeholder="Search symbol or LaTeX‚Ä¶"
            style={{
              width: "100%",
              boxSizing: "border-box",
              padding: "4px 6px",
              marginBottom: 6,
              borderRadius: 4,
              border: "1px solid #ccc",
              outline: "none"
            }}
          />

          <div style={{ maxHeight: 260, overflowY: "auto" }}>
            {results.map((sym, idx) => (
              <div
                key={sym.latex + idx}
                style={{
                  display: "flex",
                  alignItems: "center",
                  padding: "4px 6px",
                  borderRadius: 4,
                  background: idx === highlightIndex ? "#eef3ff" : "transparent",
                  cursor: "pointer"
                }}
                onMouseDown={(e) => {
                  e.preventDefault();
                  onSelect(sym);
                }}
              >
                <span
                  style={{
                    width: 32,
                    textAlign: "center",
                    fontSize: 18,
                    marginRight: 6
                  }}
                >
                  {sym.label}
                </span>
                <div
                  style={{
                    display: "flex",
                    flexDirection: "column",
                    flex: 1,
                    overflow: "hidden"
                  }}
                >
                  <span
                    style={{
                      fontFamily: "monospace",
                      fontSize: 12,
                      whiteSpace: "nowrap",
                      overflow: "hidden",
                      textOverflow: "ellipsis"
                    }}
                  >
                    {sym.latex}
                  </span>
                  {sym.keywords && sym.keywords.length > 0 && (
                    <span
                      style={{
                        fontSize: 11,
                        color: "#777",
                        whiteSpace: "nowrap",
                        overflow: "hidden",
                        textOverflow: "ellipsis"
                      }}
                    >
                      {sym.keywords.slice(0, 4).join(", ")}
                    </span>
                  )}
                </div>
              </div>
            ))}

            {results.length === 0 && (
              <div
                style={{
                  padding: "4px 6px",
                  fontSize: 12,
                  color: "#888"
                }}
              >
                No matches
              </div>
            )}
          </div>
        </div>
      );
    };

    // ---------- Helper: show popup from vanilla JS ----------
    const popupRoot = ReactDOM.createRoot(
      document.getElementById("symbol-popup-root")
    );

    window.showSymbolPopup = function ({ x, y, initialQuery, onSelect }) {
      const handleSelect = (symbol) => {
        // --- Update recent list (per session, in-memory) ---
        if (!Array.isArray(window.RECENT_SYMBOLS)) {
          window.RECENT_SYMBOLS = [];
        }
        const arr = window.RECENT_SYMBOLS;
        const latex = symbol.latex;

        // Remove if already present
        const existingIndex = arr.indexOf(latex);
        if (existingIndex !== -1) {
          arr.splice(existingIndex, 1);
        }
        // Add to front
        arr.unshift(latex);
        // Keep list bounded (e.g. last 30 unique symbols)
        if (arr.length > 30) {
          arr.length = 30;
        }

        // Pass selection back to caller (inserts in textarea, etc.)
        onSelect(symbol);

        // Close popup
        popupRoot.render(null);
      };

      const handleClose = () => {
        popupRoot.render(null);
      };

      popupRoot.render(
        <SymbolPopup
          x={x}
          y={y}
          initialQuery={initialQuery}
          onSelect={handleSelect}
          onClose={handleClose}
        />
      );
    };

  </script>

  <!-- Plain JS: MathJax rendering, copy, canvas, backslash trigger -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Load symbols.json
      fetch("../../symbols.json")
        .then((res) => res.json())
        .then((data) => {
          window.SYMBOLS = Array.isArray(data) ? data : (data.symbols || []);
          console.log("Loaded symbols:", window.SYMBOLS.length);
        })
        .catch((err) => {
          console.error("Failed to load symbols.json", err);
          window.SYMBOLS = [];
        });

      function renderBlockTeX(textarea, outputElement) {
        const raw = textarea.value.trim();
        if (!raw) {
          if (outputElement) outputElement.innerHTML = "";
          return;
        }

        let tex = raw;
        const explicitDisplayOrEnv = /^(\$\$|\\\[|\\begin\{)/.test(raw);
        const looksMultiline = raw.includes("\\\\") || raw.includes("\n");

        if (!explicitDisplayOrEnv) {
          if (looksMultiline) {
            tex = "\\begin{gather*}\n" + raw + "\n\\end{gather*}";
          } else {
            tex = "\\[" + raw + "\\]";
          }
        }

        if (!outputElement) return;
        outputElement.textContent = tex;

        if (window.MathJax && MathJax.typesetPromise) {
          MathJax.typesetPromise([outputElement]).catch((err) =>
            console.error(err)
          );
        }
      }

      function insertAtCursor(textarea, text) {
        if (!textarea) return;
        const start = textarea.selectionStart != null ? textarea.selectionStart : textarea.value.length;
        const end   = textarea.selectionEnd != null ? textarea.selectionEnd : textarea.value.length;
        const value = textarea.value;

        textarea.value = value.slice(0, start) + text + value.slice(end);
        const newPos = start + text.length;

        textarea.focus();
        textarea.selectionStart = textarea.selectionEnd = newPos;
        textarea.dispatchEvent(new Event("input", { bubbles: true }));
      }

      // ---------- Notes textareas ----------
      const allTextareas = document.querySelectorAll(".latex-input");

      // ========================================================
      // Opens the popup based on the textarea cursor position
      // ========================================================
      function openPopupAtTextareaCursor(ta) {
        const rect = ta.getBoundingClientRect();
        const x = rect.left + window.scrollX + 40;
        const y = rect.top + window.scrollY + 20;

        const pos = ta.selectionStart != null ? ta.selectionStart : ta.value.length;
        const value = ta.value;

        let initialQuery = "";
        const lastBackslash = value.lastIndexOf("\\", pos - 1);
        if (lastBackslash !== -1 && lastBackslash < pos) {
          initialQuery = value.slice(lastBackslash + 1, pos);
        }

        if (window.showSymbolPopup) {
          window.showSymbolPopup({
            x,
            y,
            initialQuery,
            onSelect(symbol) {
              insertAtCursor(ta, symbol.latex);
            }
          });
        }
      }

      allTextareas.forEach((ta) => {
        // Live render on input
        ta.addEventListener("input", () => {
          const box = ta.closest(".group-notes");
          if (!box) return;
          const out = box.querySelector(".rendered-output");
          renderBlockTeX(ta, out);
        });

        let lastBackslashTime = 0;

        ta.addEventListener("keydown", (e) => {
          if (e.key === "\\") {
            const now = Date.now();

            // Rapid double press ‚Üí treat as shortcut
            if (now - lastBackslashTime < 250) {
              e.preventDefault(); // don't type this second "\"

              // üî• Remove the *previous* "\" that was just typed
              const pos = ta.selectionStart != null ? ta.selectionStart : ta.value.length;
              const value = ta.value;

              if (pos > 0 && value[pos - 1] === "\\") {
                ta.value = value.slice(0, pos - 1) + value.slice(pos);
                ta.selectionStart = ta.selectionEnd = pos - 1;
                // re-render after change
                ta.dispatchEvent(new Event("input", { bubbles: true }));
              }

              // Open the popup at the cursor
              openPopupAtTextareaCursor(ta);
              lastBackslashTime = 0; // reset
              return;
            }

            // First "\" ‚Üí let it type normally
            lastBackslashTime = now;
          }
        });

        // Optional: initial render
        const box = ta.closest(".group-notes");
        if (box) {
          const out = box.querySelector(".rendered-output");
          renderBlockTeX(ta, out);
        }
      });



      // ---------- Copy buttons ----------
      const noteGroups = document.querySelectorAll(".group-notes");
      noteGroups.forEach((group) => {
        const section  = group.closest(".problem-group");
        const textarea = group.querySelector(".latex-input");
        const button   = group.querySelector(".copy-btn");

        if (!button || !textarea || !section) return;

        button.addEventListener("click", async () => {
          const problems = Array.from(
            section.querySelectorAll(":scope > p")
          ).map((p) => p.textContent.trim());

          const problemBlock =
            "Problems:\n" +
            problems.map((t, i) => `${i + 1}. ${t}`).join("\n") +
            "\n\n";

          const latex = textarea.value.trim();
          const notesBlock = "Notes (LaTeX):\n" + latex + "\n";

          const combined = problemBlock + notesBlock;

          try {
            await navigator.clipboard.writeText(combined);
            button.classList.add("copied");
            setTimeout(() => button.classList.remove("copied"), 1200);
          } catch (err) {
            console.error("Clipboard error:", err);
            alert("Copy failed ‚Äì your browser may block clipboard access.");
          }
        });
      });

      // ---------- Drawing canvases ----------
      const canvases = document.querySelectorAll(".note-canvas");
      canvases.forEach((canvas) => {
        const ctx = canvas.getContext("2d");
        const clearBtn = canvas.closest(".canvas-block").querySelector(".clear-canvas");

        function resizeCanvas() {
          const rect = canvas.getBoundingClientRect();
          const dpr = window.devicePixelRatio || 1;

          canvas.width  = rect.width * dpr;
          canvas.height = rect.height * dpr;

          ctx.setTransform(1, 0, 0, 1, 0, 0);
          ctx.scale(dpr, dpr);

          ctx.lineCap = "round";
          ctx.lineJoin = "round";
          ctx.lineWidth = 2;
        }

        resizeCanvas();
        window.addEventListener("resize", resizeCanvas);

        let drawing = false;
        let lastX = 0;
        let lastY = 0;

        function getPos(evt) {
          const rect = canvas.getBoundingClientRect();
          if (evt.touches && evt.touches[0]) {
            return {
              x: evt.touches[0].clientX - rect.left,
              y: evt.touches[0].clientY - rect.top
            };
          } else {
            return {
              x: evt.clientX - rect.left,
              y: evt.clientY - rect.top
            };
          }
        }

        function startDraw(evt) {
          evt.preventDefault();
          drawing = true;
          const pos = getPos(evt);
          lastX = pos.x;
          lastY = pos.y;
        }

        function draw(evt) {
          if (!drawing) return;
          evt.preventDefault();
          const pos = getPos(evt);
          ctx.beginPath();
          ctx.moveTo(lastX, lastY);
          ctx.lineTo(pos.x, pos.y);
          ctx.stroke();
          lastX = pos.x;
          lastY = pos.y;
        }

        function endDraw(evt) {
          if (!drawing) return;
          evt.preventDefault();
          drawing = false;
        }

        canvas.addEventListener("mousedown", startDraw);
        canvas.addEventListener("mousemove", draw);
        window.addEventListener("mouseup", endDraw);

        canvas.addEventListener("touchstart", startDraw, { passive: false });
        canvas.addEventListener("touchmove", draw, { passive: false });
        canvas.addEventListener("touchend", endDraw, { passive: false });
        canvas.addEventListener("touchcancel", endDraw, { passive: false });

        if (clearBtn) {
          clearBtn.addEventListener("click", () => {
            const rect = canvas.getBoundingClientRect();
            ctx.clearRect(0, 0, rect.width, rect.height);
          });
        }
      });
    });
  </script>

</body>
</html>