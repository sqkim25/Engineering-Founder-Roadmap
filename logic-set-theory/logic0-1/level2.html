<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Logic 0 ‚Äì Level 2</title>

  <!-- Basic layout styles -->
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
                   sans-serif;
      line-height: 1.5;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
    }

    header {
      background: #222;
      color: #fff;
      padding: 1rem 1.5rem;
    }

    header h1 {
      margin: 0;
      font-size: 1.6rem;
    }

    main {
      max-width: 900px;
      margin: 1.5rem auto 3rem;
      padding: 0 1rem 2rem;
      background: #fff;
      box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.08);
      border-radius: 8px;
    }

    section {
      margin-bottom: 2rem;
    }

    h2 {
      margin-top: 1.5rem;
      margin-bottom: 0.5rem;
      font-size: 1.3rem;
    }

    h3 {
      margin-top: 1rem;
      margin-bottom: 0.4rem;
      font-size: 1.1rem;
    }

    .note {
      font-size: 0.9rem;
      color: #555;
      margin-bottom: 0.8rem;
    }

    .problem-group {
      border-top: 1px solid #eee;
      padding-top: 1.25rem;
      margin-top: 1.25rem;
    }

    .problem-group:first-of-type {
      border-top: none;
      padding-top: 0;
      margin-top: 0.5rem;
    }

    .latex-input {
      width: 100%;
      min-height: 70px;
      padding: 0.5rem;
      font-family: "Fira Code", "JetBrains Mono", Menlo, Monaco,
                   Consolas, "Courier New", monospace;
      font-size: 0.95rem;
      border-radius: 4px;
      border: 1px solid #ccc;
      box-sizing: border-box;
      resize: vertical;
      margin-bottom: 0.5rem;
    }

    .rendered-output {
      min-height: 2rem;
      padding: 0.5rem;
      border-radius: 4px;
      border: 1px dashed #ccc;
      background: #fafafa;
      margin-bottom: 0.5rem;
      text-align: center;
    }

    .rendered-output mjx-container {
      display: inline-block;
      margin-left: auto;
      margin-right: auto;
    }

    .controls {
      display: flex;
      justify-content: flex-end;
      gap: 0.5rem;
      margin-bottom: 0.3rem;
    }

    .copy-btn {
      padding: 0.3rem 0.7rem;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      background: #333;
      color: #fff;
      font-size: 0.9rem;
    }

    .copy-btn:active {
      transform: scale(0.97);
    }

    .copy-btn.copied::after {
      content: " ‚úì";
    }

    .canvas-wrapper {
      border: 1px solid #ccc;
      border-radius: 4px;
      overflow: hidden;
      background: #fff;
    }

    .canvas-block {
      margin-top: 0.75rem;
    }

    .note-canvas {
      display: block;
      width: 100%;
      height: 250px;
      touch-action: none; /* for better touch drawing */
    }

    .clear-canvas {
      margin-top: 0.4rem;
    }



  </style>

  <!-- MathJax for LaTeX rendering -->
  <script>
    window.MathJax = {
      tex: {
        packages: { "[+]": ["ams"] },
        inlineMath: [["\\(","\\)"], ["$","$"]],
        displayMath: [["\\[","\\]"], ["$$","$$"]]
      },
      svg: { fontCache: "global" }
    };
  </script>

  <script id="MathJax-script"
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"
          async></script>
</head>
<body>
  <header>
    <h1>Logic 0 ‚Äì Level 2 Problems</h1>
  </header>

<main>
  <section>
    <p class="note">
      Level 2 (Understand) problems ask you to explain ideas in your own words,
      connect notation with meaning, and interpret definitions and examples.
      After each group of questions, use the LaTeX notes area and drawing pad
      for working, examples, or doodles.
    </p>
  </section>

  <!-- 1. Preliminaries and Notation (abbreviations, negation) -->
  <section class="problem-group" id="group-1">
    <h2>1. Preliminaries and Notation (abbreviations, negation)</h2>

    <p><strong>(U1.1)</strong>
      Explain in your own words what each of the symbols
      \(P \Rightarrow Q\), \(Q \Leftarrow P\), and \(P \Leftrightarrow Q\)
      is saying about the relationship between \(P\) and \(Q\).
    </p>

    <p><strong>(U1.2)</strong>
      You see the statement:
    </p>
    <blockquote>
      ‚ÄúIf \(P\), then \(Q\). Therefore \(R\).‚Äù
    </blockquote>
    <p>
      Rewrite this using the abbreviations from the notes and then explain
      what ‚Äú\(\therefore R\)‚Äù is <em>claiming</em> in terms of the previous
      statements.
    </p>

    <p><strong>(U1.3)</strong>
      According to the <em>negation rule</em>, explain why the negation of
      \(x \in A\) is written \(x \notin A\) instead of something like
      ‚Äúit is not the case that \(x \in A\)‚Äù. What is the advantage of this convention?
    </p>

    <p><strong>(U1.4)</strong>
      Once the notation \(\Sigma \models \tau\) is introduced, its negation is written
      \(\Sigma \not\models \tau\). Describe in words what information is being reversed
      when we add the ‚Äúslash‚Äù to the symbol.
    </p>

    <!-- Notes + drawing for group 1 -->
    <div class="group-notes">
      <h3>Notes for Group 1</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
                placeholder="e.g.\ P \Rightarrow Q,\ P \Leftrightarrow Q,\ \Sigma \not\models \tau"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 2. Sets and the Extensionality Principle -->
  <section class="problem-group" id="group-2">
    <h2>2. Sets and the Extensionality Principle</h2>

    <p><strong>(U2.1)</strong>
      Restate Definition 2.1 in your own words: what is a set, and what do the
      expressions \(t \in A\), \(t \notin A\), and \(x = y\) mean intuitively?
    </p>

    <p><strong>(U2.2)</strong>
      Remark 2.2 says: if \(A = B\), then for every object \(t\),
      \(t \in A \Leftrightarrow t \in B\). Explain why this condition matches the
      idea that two sets are ‚Äúthe same set.‚Äù
    </p>

    <p><strong>(U2.3)</strong>
      Proposition 2.3 (Extensionality) gives a <em>converse</em> to the previous
      remark: if \(\forall t\,(t\in A \Leftrightarrow t\in B)\), then \(A=B\).
      Explain why this captures the slogan ‚Äúa set is completely determined by
      its elements.‚Äù
    </p>

    <p><strong>(U2.4)</strong>
      Give two different <em>descriptions</em> of the same set (for example, using
      different set-builder or roster notations), and explain how extensionality
      shows that these describe the same set.
    </p>

    <!-- Notes + drawing for group 2 -->
    <div class="group-notes">
      <h3>Notes for Group 2</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
                placeholder="e.g.\ t \in A,\ t \notin A,\ \forall t\,(t\in A \Leftrightarrow t\in B)"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 3. Basic Constructions ‚Äì Adjoining an Element -->
  <section class="problem-group" id="group-3">
    <h2>3. Basic Constructions ‚Äì Adjoining an Element</h2>

    <p><strong>(U3.1)</strong>
      The notes define \(A;t := A \cup \{t\}\). Explain what changes when we pass
      from \(A\) to \(A;t\) in the two cases:
    </p>
    <ol>
      <li>\(t \in A\) already,</li>
      <li>\(t \notin A\).</li>
    </ol>

    <p><strong>(U3.2)</strong>
      Proposition 3.2 states that \(t \in A \Leftrightarrow A;t = A\). Explain why
      this is a reasonable characterization of ‚Äú\(t\) was already in \(A\)‚Äù.
    </p>

    <p><strong>(U3.3)</strong>
      Give an example of a set \(A\) and an element \(t\) where \(A;t \neq A\).
      Explain exactly which new element appears and why.
    </p>

    <!-- Notes + drawing for group 3 -->
    <div class="group-notes">
      <h3>Notes for Group 3</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
                placeholder="e.g.\ A ; t,\ A \cup \{t\},\ t \in A \Leftrightarrow A;t = A"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 4. Common Sets and Notation -->
  <section class="problem-group" id="group-4">
    <h2>4. Common Sets and Notation</h2>

    <h3>4.1 Special sets</h3>

    <p><strong>(U4.1)</strong>
      Explain in your own words how the empty set, a singleton, and a finite set
      \(\{x_1,\dots,x_n\}\) differ in terms of their elements. Give one concrete
      example of each.
    </p>

    <p><strong>(U4.2)</strong>
      Remark 4.2 says \(\{x,y\} = \{y,x\}\) ‚Äúsince order does not matter for sets.‚Äù
      Contrast this with ordered pairs \(\langle x,y\rangle\). Explain why order
      matters in one context but not the other.
    </p>

    <h3>4.2 Infinite sets</h3>

    <p><strong>(U4.3)</strong>
      Explain the intended difference between
      \(\mathbb{N} = \{0,1,2,\dots\}\) and
      \(\mathbb{Z} = \{\dots,-2,-1,0,1,2,\dots\}\). In particular, describe a type
      of number that lies in \(\mathbb{Z}\) but not in \(\mathbb{N}\).
    </p>

    <!-- Notes + drawing for group 4 -->
    <div class="group-notes">
      <h3>Notes for Group 4</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
                placeholder="e.g.\ \varnothing,\ \{x\},\ \{x_1,\dots,x_n\},\ \mathbb{N},\ \mathbb{Z}"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 5. Sets Specified by Properties ‚Äì Set-builder Notation -->
  <section class="problem-group" id="group-5">
    <h2>5. Sets Specified by Properties ‚Äì Set-builder Notation</h2>

    <p><strong>(U5.1)</strong>
      Given a property \(P(x)\), the set \(\{x \mid P(x)\}\) is defined in the notes.
      Rephrase this in ordinary English: what must an object do to be in this set?
    </p>

    <p><strong>(U5.2)</strong>
      Consider \(\{x \in A \mid P(x)\}\). Explain the role of ‚Äú\(\in A\)‚Äù versus the
      role of ‚Äú\(P(x)\)‚Äù in determining which elements are included.
    </p>

    <p><strong>(U5.3)</strong>
      The example \(\{\langle m,n\rangle \mid m < n \text{ in } \mathbb{N}\}\) appears
      in the notes. Explain in words what each ordered pair in this set looks like
      (how are the first and second coordinates related?).
    </p>

    <p><strong>(U5.4)</strong>
      Rewrite the following <em>English</em> description in set-builder notation and
      then explain how your notation matches the words:
    </p>
    <blockquote>
      ‚ÄúThe set of all integers that are even and positive.‚Äù
    </blockquote>

    <!-- Notes + drawing for group 5 -->
    <div class="group-notes">
      <h3>Notes for Group 5</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
                placeholder="e.g.\ \{x : P(x)\},\ \{x \in A : P(x)\},\ \text{even positive integers}"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 6. Subsets and Power Sets -->
  <section class="problem-group" id="group-6">
    <h2>6. Subsets and Power Sets</h2>

    <p><strong>(U6.1)</strong>
      Definition 6.1 says \(A \subseteq B\) if
      \(\forall x\,(x\in A \Rightarrow x\in B)\). Explain how this condition captures
      the everyday idea of ‚Äú\(A\) is contained in \(B\)‚Äù.
    </p>

    <p><strong>(U6.2)</strong>
      Remark 6.2 says every set is a subset of itself and
      \(\varnothing \subseteq A\) for every set \(A\). Explain in words why
      ‚Äú\(\varnothing \subseteq A\)‚Äù is called <em>vacuously true</em>.
    </p>

    <p><strong>(U6.3)</strong>
      The power set \(\mathcal{P}(A)\) is defined as \(\{x \mid x \subseteq A\}\).
      Explain why elements of \(\mathcal{P}(A)\) are ‚Äúsets of elements of \(A\)‚Äù
      rather than just elements of \(A\) themselves.
    </p>

    <p><strong>(U6.4)</strong>
      Using Example 6.4, explain why \(\mathcal{P}(\varnothing) = \{\varnothing\}\)
      has exactly one element, and why \(\mathcal{P}(\{\varnothing\}) = \{\varnothing,\{\varnothing\}\}\)
      has two different elements.
    </p>

    <!-- Notes + drawing for group 6 -->
    <div class="group-notes">
      <h3>Notes for Group 6</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
                placeholder="e.g.\ A \subseteq B,\ \varnothing \subseteq A,\ \mathcal{P}(A),\ \mathcal{P}(\varnothing)"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 7. Union and Intersection -->
  <section class="problem-group" id="group-7">
    <h2>7. Union and Intersection</h2>

    <h3>7.1 Binary operations</h3>

    <p><strong>(U7.1)</strong>
      Using Definition 7.1, explain in your own words how to decide whether an
      element \(x\) belongs to \(A \cup B\) and how to decide whether \(x\)
      belongs to \(A \cap B\).
    </p>

    <p><strong>(U7.2)</strong>
      In Definition 7.2, sets \(A\) and \(B\) are disjoint if
      \(A \cap B = \varnothing\). Give an everyday interpretation of what
      ‚Äúdisjoint‚Äù means and illustrate with a simple example of two disjoint
      subsets of \(\{1,2,3,4\}\).
    </p>

    <p><strong>(U7.3)</strong>
      Explain the difference between:
    </p>
    <ul>
      <li>‚Äúa family of sets is disjoint‚Äù, and</li>
      <li>‚Äúa family of sets is <strong>pairwise</strong> disjoint.‚Äù</li>
    </ul>
    <p>
      Why does the word ‚Äúpairwise‚Äù matter?
    </p>

    <h3>7.2 Indexed unions and intersections</h3>

    <p><strong>(U7.4)</strong>
      Definition 7.3 defines \(\bigcup A\) and \(\bigcap A\) when \(A\) is a set
      of sets. Explain the meaning of the conditions
      \(\exists S\in A,\ x\in S\) (for union) and \(\forall S\in A,\ x\in S\)
      (for intersection).
    </p>

    <p><strong>(U7.5)</strong>
      In Example 7.4,
      \(A = \{\{0,1,5\},\{1,6\},\{1,5\}\}\).
      Explain in words why \(\bigcup A = \{0,1,5,6\}\) and \(\bigcap A = \{1\}\).
      Specifically, describe how you reason about each element.
    </p>

    <p><strong>(U7.6)</strong>
      Remark 7.5 says that for a family \((A_n)_{n\in\mathbb{N}}\) we often write
      \(\bigcup_{n\in\mathbb{N}} A_n\) instead of
      \(\bigcup \{A_n \mid n\in\mathbb{N}\}\). Explain why this is just a
      notational convenience and does not change the underlying set.
    </p>

    <!-- Notes + drawing for group 7 -->
    <div class="group-notes">
      <h3>Notes for Group 7</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
                placeholder="e.g.\ x \in A \cup B,\ x \in A \cap B,\ \bigcup A,\ \bigcap A,\ \text{pairwise disjoint}"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 8. Ordered Pairs and Sequences -->
  <section class="problem-group" id="group-8">
    <h2>8. Ordered Pairs and Sequences</h2>

    <h3>8.1 Ordered pairs</h3>

    <p><strong>(U8.1)</strong>
      Using Kuratowski‚Äôs definition \(\langle x,y\rangle := \{\{x\},\{x,y\}\}\),
      explain why \(\langle x,y\rangle = \langle u,v\rangle\) forces \(x=u\)
      and \(y=v\). Focus on the idea of ‚Äúhow we can recover the first and second
      coordinates from the set.‚Äù
    </p>

    <h3>8.2 n-tuples and segments</h3>

    <p><strong>(U8.2)</strong>
      Definition 8.3 defines \(\langle x_1,\dots,x_{n+1}\rangle\) recursively
      from \(\langle x_1,\dots,x_n\rangle\). Explain in words how this recursive
      definition builds long tuples from shorter ones.
    </p>

    <p><strong>(U8.3)</strong>
      Using Definition 8.4, explain the difference between:
    </p>
    <ul>
      <li>a <em>segment</em> of a finite sequence,</li>
      <li>an <em>initial</em> segment,</li>
      <li>a <em>proper</em> initial segment.</li>
    </ul>
    <p>
      Give a concrete example of each using the sequence
      \(\langle a,b,c,d\rangle\).
    </p>

    <h3>8.3 Lemma 0A and corollary</h3>

    <p><strong>(U8.4)</strong>
      Lemma 8.5 (Lemma 0A) relates two sequences
      \(\langle x_1,\dots,x_m\rangle\) and
      \(\langle y_1,\dots,y_{m+k}\rangle\). Without proving it, explain what the
      lemma says about how the first sequence sits inside the second one.
    </p>

    <p><strong>(U8.5)</strong>
      Corollary 8.7 assumes that no element of \(A\) is itself a finite sequence.
      Explain why, under this assumption, if
      \(\langle x_1,\dots,x_m\rangle = \langle y_1,\dots,y_n\rangle\), then
      \(m=n\) and \(x_i=y_i\) for all \(i\). What ‚Äúintuitive‚Äù property of sequences
      does this capture?
    </p>

    <!-- Notes + drawing for group 8 -->
    <div class="group-notes">
      <h3>Notes for Group 8</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
                placeholder="e.g.\ \langle x,y\rangle,\ \text{finite sequence},\ \text{initial segment},\ \text{Lemma 0A}"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 9. Cartesian Products and Relations -->
  <section class="problem-group" id="group-9">
    <h2>9. Cartesian Products and Relations</h2>

    <h3>9.1 Products</h3>

    <p><strong>(U9.1)</strong>
      Explain in your own words what an element of \(A \times B\) looks like,
      and what an element of \(A^n\) looks like. Use a concrete example with small
      sets, like \(A = \{0,1\}\), \(B = \{a,b\}\).
    </p>

    <h3>9.2 Relations, domain, range, field</h3>

    <p><strong>(U9.2)</strong>
      Definition 9.2 calls a relation a ‚Äúset of ordered pairs.‚Äù Using Example 9.3,
      explain how the strict ordering on \(\{0,1,2,3\}\) is captured by listing
      pairs like \(\langle 0,1\rangle\), \(\langle 2,3\rangle\).
    </p>

    <p><strong>(U9.3)</strong>
      Using Definition 9.4, explain how you would find the domain, range, and
      field of a relation \(R\). Then, using Example 9.3, describe
      \(\operatorname{dom}(R)\), \(\operatorname{ran}(R)\), and \(\operatorname{fld}(R)\)
      in words.
    </p>

    <h3>9.3 n-ary relations and restriction</h3>

    <p><strong>(U9.4)</strong>
      Definition 9.5 says an \(n\)-ary relation on \(A\) is a subset of \(A^n\).
      Explain how this generalizes the idea of a binary relation, and describe
      what a <em>unary</em> relation on \(A\) looks like in this framework.
    </p>

    <p><strong>(U9.5)</strong>
      The equality relation on \(A\) is
      \(\{\langle x,x\rangle \mid x\in A\}\). Explain why this particular set of
      pairs encodes the idea of ‚Äúequality.‚Äù
    </p>

    <p><strong>(U9.6)</strong>
      Definition 9.6 defines the restriction \(R \upharpoonright B\) of a relation
      \(R\) on \(A\) to a subset \(B\). Explain what changes and what stays the
      same when we restrict a relation to a smaller set.
    </p>

    <p><strong>(U9.7)</strong>
      In Example 9.7, \(R\) is the usual strict order on \(\mathbb{N}\) and
      \(B=\{0,1,2,3\}\). Explain why \(R \upharpoonright B\) is exactly the strict
      order relation on \(\{0,1,2,3\}\) listed earlier.
    </p>

    <!-- Notes + drawing for group 9 -->
    <div class="group-notes">
      <h3>Notes for Group 9</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
                placeholder="e.g.\ A \times B,\ A^n,\ \operatorname{dom}R,\ \operatorname{ran}R,\ R\upharpoonright B"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 10. Functions and Operations -->
  <section class="problem-group" id="group-10">
    <h2>10. Functions and Operations</h2>

    <h3>10.1 Functions</h3>

    <p><strong>(U10.1)</strong>
      Definition 10.1 says a relation \(F\) is a function if for each
      \(x\in \operatorname{dom}(F)\) there is exactly one \(y\) with
      \(\langle x,y\rangle\in F\). Explain how this corresponds to the usual idea
      that ‚Äúa function assigns a <em>single</em> output to each input.‚Äù
    </p>

    <p><strong>(U10.2)</strong>
      Explain the difference between:
    </p>
    <ul>
      <li>
        ‚Äú\(F:A\to B\)‚Äù with \(\operatorname{ran}(F)\subseteq B\), and
      </li>
      <li>
        ‚Äú\(F\) maps \(A\) onto \(B\)‚Äù (is surjective).
      </li>
    </ul>
    <p>
      What extra requirement does ‚Äúonto‚Äù add?
    </p>

    <p><strong>(U10.3)</strong>
      Explain in your own words what it means for a function \(F\) to be
      one-to-one (injective). Give a simple example of a function that is
      injective and one that is not, and explain why.
    </p>

    <h3>10.2 n-ary operations and restriction</h3>

    <p><strong>(U10.4)</strong>
      An \(n\)-ary operation on \(A\) is a function \(f:A^n\to A\). Explain why
      requiring the codomain to be \(A\) (not just any set) is important for
      calling this an ‚Äúoperation on \(A\)‚Äù.
    </p>

    <p><strong>(U10.5)</strong>
      Example 10.3 mentions addition on \(\mathbb{N}\) and the successor mapping
      \(S(n)=n+1\). Explain how each is an operation in the sense of Definition 10.2
      (one binary, one unary).
    </p>

    <p><strong>(U10.6)</strong>
      Definition 10.4 defines a restricted operation \(g\) from an operation \(f\)
      on \(A\) by intersecting with \(B^n\times A\). Explain intuitively what the
      restriction is doing when we move from \(A\) to a smaller set \(B\subseteq A\).
    </p>

    <p><strong>(U10.7)</strong>
      Proposition 10.5 says \(g\) is an \(n\)-ary operation on \(B\)
      <em>iff</em> \(B\) is closed under \(f\). Explain what ‚Äúclosed under \(f\)‚Äù
      means in everyday language, and use Example 10.6 (addition on \(\mathbb{R}\)
      restricted to \(\mathbb{N}\)) to illustrate.
    </p>

    <!-- Notes + drawing for group 10 -->
    <div class="group-notes">
      <h3>Notes for Group 10</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
                placeholder="e.g.\ F : A \to B,\ \operatorname{ran}F,\ \text{onto},\ f:A^n\to A,\ \text{closed under }f"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 11. Standard Classes of Relations -->
  <section class="problem-group" id="group-11">
    <h2>11. Standard Classes of Relations</h2>

    <p><strong>(U11.1)</strong>
      Using Definition 11.1, explain in your own words what it means for a
      relation \(R\) on \(A\) to be:
    </p>
    <ol>
      <li>reflexive on \(A\),</li>
      <li>symmetric,</li>
      <li>transitive.</li>
    </ol>
    <p>
      Give a small example relation on \(\{1,2\}\) that has some of these
      properties but not others.
    </p>

    <p><strong>(U11.2)</strong>
      Explain the trichotomy property: for every \(x,y\in A\), exactly one of
      \(\langle x,y\rangle\in R\), \(x=y\), or \(\langle y,x\rangle\in R\) holds.
      Describe how this captures the behavior of a ‚Äústrict less-than‚Äù relation.
    </p>

    <p><strong>(U11.3)</strong>
      Using Definitions 11.2 and 11.3, explain the difference between an
      equivalence relation and an ordering relation. Which properties do they
      share, and which are different?
    </p>

    <!-- Notes + drawing for group 11 -->
    <div class="group-notes">
      <h3>Notes for Group 11</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
                placeholder="e.g.\ \text{reflexive},\ \text{symmetric},\ \text{transitive},\ \text{trichotomy}"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>

  <!-- 12. Equivalence Classes -->
  <section class="problem-group" id="group-12">
    <h2>12. Equivalence Classes</h2>

    <p><strong>(U12.1)</strong>
      Explain what an equivalence class
      \([x] = \{y\in A \mid \langle x,y\rangle\in R\}\) represents, in terms of the
      relation \(R\). Use the phrase ‚Äúall elements that are ‚Ä¶ to \(x\)‚Äù to complete
      your description.
    </p>

    <p><strong>(U12.2)</strong>
      Proposition 12.2(1) says the equivalence classes form a <em>partition</em>
      of \(A\). Explain what it means for equivalence classes to ‚Äúcover‚Äù \(A\) and
      to be ‚Äúnon-overlapping.‚Äù
    </p>

    <p><strong>(U12.3)</strong>
      Proposition 12.2(2) says \([x] = [y]\) iff \(\langle x,y\rangle\in R\).
      Explain why this means that ‚Äúbeing in the same equivalence class‚Äù is the same
      as ‚Äúbeing equivalent under \(R\)‚Äù.
    </p>

    <p><strong>(U12.4)</strong>
      Consider the relation on \(\mathbb{Z}\) defined by \(a \sim b\) if
      \(a-b\) is divisible by \(3\). In words, describe what an equivalence class
      looks like in this example and how this matches the general definition
      from the notes.
    </p>

    <!-- Notes + drawing for group 12 -->
    <div class="group-notes">
      <h3>Notes for Group 12</h3>
      <div class="note">
        Type \\\\ quickly to open LaTeX snippet app on the note.
      </div>
      <textarea class="latex-input"
                placeholder="e.g.\ [x] = \{y \in A : \langle x,y\rangle \in R\},\ \text{partition of }A,\ a \sim b \iff 3 \mid (a-b)"></textarea>
      <div class="rendered-output"></div>
      <div class="controls">
        <button class="copy-btn">Copy problems + notes</button>
      </div>
    </div>

    <div class="canvas-block">
      <div class="note">
        Draw/write here (mouse or touch). Use ‚ÄúClear drawing‚Äù to reset.
      </div>
      <div class="canvas-wrapper">
        <canvas class="note-canvas"></canvas>
      </div>
      <button class="copy-btn clear-canvas">Clear drawing</button>
    </div>
  </section>
</main>


  <!-- Root for the React symbol popup -->
  <div id="symbol-popup-root"></div>

  <!-- React + ReactDOM + Babel (for JSX in this example) -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- React + JSX: ONLY the popup component + showSymbolPopup -->
  <script type="text/babel" data-presets="env,react">
    // ---------- Symbol data (you can expand this later) ----------
    window.SYMBOLS = [];
    window.RECENT_SYMBOLS = [];

    // ---------- Simple search ----------
    function searchSymbols(symbols, query) {
      const q = query.trim().toLowerCase();

      const recentList = Array.isArray(window.RECENT_SYMBOLS)
        ? window.RECENT_SYMBOLS
        : [];
      const recentSet = new Set(recentList);

      // ---------- Case 1: empty query ‚Üí show recent first ----------
      if (!q) {
        const seen = new Set();
        const recent = [];
        const others = [];

        // 1) Put recents first, in recency order
        for (const latex of recentList) {
          const sym = symbols.find((s) => s.latex === latex);
          if (sym && !seen.has(sym.latex)) {
            recent.push(sym);
            seen.add(sym.latex);
          }
        }

        // 2) Then all other symbols, sorted by priority
        for (const s of symbols) {
          if (!seen.has(s.latex)) {
            others.push(s);
          }
        }

        others.sort((a, b) => (b.priority || 0) - (a.priority || 0));

        return [...recent, ...others].slice(0, 20);
      }

      // ---------- Case 2: non-empty query ‚Üí scoring with recency boost ----------
      return symbols
        .map((s) => {
          const haystack = [
            s.label,
            s.latex,
            ...(s.keywords || []),
            ...(s.categories || [])
          ].join(" ").toLowerCase();

          if (!haystack.includes(q)) return null;

          let score = s.priority || 0;

          // Strong boost if this is a recent symbol
          const recIndex = recentList.indexOf(s.latex);
          if (recIndex !== -1) {
            const recencyWeight = 1.0 + (recentList.length - recIndex) * 0.05;
            score += recencyWeight;
          }

          if (s.latex.toLowerCase().startsWith("\\" + q)) score += 0.7;
          if ((s.keywords || []).some((k) => k.toLowerCase() === q)) score += 0.5;
          if (s.label.toLowerCase() === q) score += 0.4;

          const idx = haystack.indexOf(q);
          if (idx >= 0) score += Math.max(0, 0.3 - idx / 50);

          return { s, score };
        })
        .filter(Boolean)
        .sort((a, b) => b.score - a.score)
        .map((x) => x.s)
        .slice(0, 20);
    }


    // ---------- React popup component ----------
    const SymbolPopup = ({ x, y, initialQuery = "", onSelect, onClose }) => {
        const [query, setQuery] = React.useState("");
        const [highlightIndex, setHighlightIndex] = React.useState(0);
        const containerRef = React.useRef(null);
        const inputRef = React.useRef(null);

        const results = React.useMemo(
          () => searchSymbols(window.SYMBOLS || [], query),
          [query]
        );

        React.useEffect(() => {
          if (inputRef.current) {
            setTimeout(() => inputRef.current.focus(), 0);
          }
        }, []);

      React.useEffect(() => {
        if (inputRef.current) {
          setTimeout(() => inputRef.current.focus(), 0);
        }
      }, []);

      React.useEffect(() => {
        function handleClickOutside(e) {
          if (!containerRef.current) return;
          if (!containerRef.current.contains(e.target)) {
            onClose();
          }
        }
        document.addEventListener("mousedown", handleClickOutside);
        return () => document.removeEventListener("mousedown", handleClickOutside);
      }, [onClose]);

      const handleKeyDown = (e) => {
        const count = results.length;
        if (e.key === "ArrowDown") {
          e.preventDefault();
          if (count === 0) return;
          setHighlightIndex((prev) => (prev + 1) % count);
        } else if (e.key === "ArrowUp") {
          e.preventDefault();
          if (count === 0) return;
          setHighlightIndex((prev) => (prev - 1 + count) % count);
        } else if (e.key === "Enter") {
          e.preventDefault();
          if (count === 0) return;
          onSelect(results[highlightIndex]);
        } else if (e.key === "Escape") {
          e.preventDefault();
          onClose();
        }
      };

      return (
        <div
          ref={containerRef}
          style={{
            position: "absolute",
            left: x,
            top: y,
            zIndex: 9999,
            minWidth: 260,
            maxWidth: 360,
            background: "#fff",
            border: "1px solid #ddd",
            borderRadius: 6,
            boxShadow: "0 8px 24px rgba(0,0,0,0.12)",
            padding: 8,
            fontFamily:
              'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',
            fontSize: 13
          }}
        >
          <input
            ref={inputRef}
            value={query}
            onChange={(e) => {
              setQuery(e.target.value);
              setHighlightIndex(0);
            }}
            onKeyDown={handleKeyDown}
            placeholder="Search symbol or LaTeX‚Ä¶"
            style={{
              width: "100%",
              boxSizing: "border-box",
              padding: "4px 6px",
              marginBottom: 6,
              borderRadius: 4,
              border: "1px solid #ccc",
              outline: "none"
            }}
          />

          <div style={{ maxHeight: 260, overflowY: "auto" }}>
            {results.map((sym, idx) => (
              <div
                key={sym.latex + idx}
                style={{
                  display: "flex",
                  alignItems: "center",
                  padding: "4px 6px",
                  borderRadius: 4,
                  background: idx === highlightIndex ? "#eef3ff" : "transparent",
                  cursor: "pointer"
                }}
                onMouseDown={(e) => {
                  e.preventDefault();
                  onSelect(sym);
                }}
              >
                <span
                  style={{
                    width: 32,
                    textAlign: "center",
                    fontSize: 18,
                    marginRight: 6
                  }}
                >
                  {sym.label}
                </span>
                <div
                  style={{
                    display: "flex",
                    flexDirection: "column",
                    flex: 1,
                    overflow: "hidden"
                  }}
                >
                  <span
                    style={{
                      fontFamily: "monospace",
                      fontSize: 12,
                      whiteSpace: "nowrap",
                      overflow: "hidden",
                      textOverflow: "ellipsis"
                    }}
                  >
                    {sym.latex}
                  </span>
                  {sym.keywords && sym.keywords.length > 0 && (
                    <span
                      style={{
                        fontSize: 11,
                        color: "#777",
                        whiteSpace: "nowrap",
                        overflow: "hidden",
                        textOverflow: "ellipsis"
                      }}
                    >
                      {sym.keywords.slice(0, 4).join(", ")}
                    </span>
                  )}
                </div>
              </div>
            ))}

            {results.length === 0 && (
              <div
                style={{
                  padding: "4px 6px",
                  fontSize: 12,
                  color: "#888"
                }}
              >
                No matches
              </div>
            )}
          </div>
        </div>
      );
    };

    // ---------- Helper: show popup from vanilla JS ----------
    const popupRoot = ReactDOM.createRoot(
      document.getElementById("symbol-popup-root")
    );

    window.showSymbolPopup = function ({ x, y, initialQuery, onSelect }) {
      const handleSelect = (symbol) => {
        // --- Update recent list (per session, in-memory) ---
        if (!Array.isArray(window.RECENT_SYMBOLS)) {
          window.RECENT_SYMBOLS = [];
        }
        const arr = window.RECENT_SYMBOLS;
        const latex = symbol.latex;

        // Remove if already present
        const existingIndex = arr.indexOf(latex);
        if (existingIndex !== -1) {
          arr.splice(existingIndex, 1);
        }
        // Add to front
        arr.unshift(latex);
        // Keep list bounded (e.g. last 30 unique symbols)
        if (arr.length > 30) {
          arr.length = 30;
        }

        // Pass selection back to caller (inserts in textarea, etc.)
        onSelect(symbol);

        // Close popup
        popupRoot.render(null);
      };

      const handleClose = () => {
        popupRoot.render(null);
      };

      popupRoot.render(
        <SymbolPopup
          x={x}
          y={y}
          initialQuery={initialQuery}
          onSelect={handleSelect}
          onClose={handleClose}
        />
      );
    };

  </script>

  <!-- Plain JS: MathJax rendering, copy, canvas, backslash trigger -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Load symbols.json
      fetch("../../symbols.json")
        .then((res) => res.json())
        .then((data) => {
          window.SYMBOLS = Array.isArray(data) ? data : (data.symbols || []);
          console.log("Loaded symbols:", window.SYMBOLS.length);
        })
        .catch((err) => {
          console.error("Failed to load symbols.json", err);
          window.SYMBOLS = [];
        });

      function renderBlockTeX(textarea, outputElement) {
        const raw = textarea.value.trim();
        if (!raw) {
          if (outputElement) outputElement.innerHTML = "";
          return;
        }

        let tex = raw;
        const explicitDisplayOrEnv = /^(\$\$|\\\[|\\begin\{)/.test(raw);
        const looksMultiline = raw.includes("\\\\") || raw.includes("\n");

        if (!explicitDisplayOrEnv) {
          if (looksMultiline) {
            tex = "\\begin{gather*}\n" + raw + "\n\\end{gather*}";
          } else {
            tex = "\\[" + raw + "\\]";
          }
        }

        if (!outputElement) return;
        outputElement.textContent = tex;

        if (window.MathJax && MathJax.typesetPromise) {
          MathJax.typesetPromise([outputElement]).catch((err) =>
            console.error(err)
          );
        }
      }

      function insertAtCursor(textarea, text) {
        if (!textarea) return;
        const start = textarea.selectionStart != null ? textarea.selectionStart : textarea.value.length;
        const end   = textarea.selectionEnd != null ? textarea.selectionEnd : textarea.value.length;
        const value = textarea.value;

        textarea.value = value.slice(0, start) + text + value.slice(end);
        const newPos = start + text.length;

        textarea.focus();
        textarea.selectionStart = textarea.selectionEnd = newPos;
        textarea.dispatchEvent(new Event("input", { bubbles: true }));
      }

      // ---------- Notes textareas ----------
      const allTextareas = document.querySelectorAll(".latex-input");

      // ========================================================
      // Opens the popup based on the textarea cursor position
      // ========================================================
      function openPopupAtTextareaCursor(ta) {
        const rect = ta.getBoundingClientRect();
        const x = rect.left + window.scrollX + 40;
        const y = rect.top + window.scrollY + 20;

        const pos = ta.selectionStart != null ? ta.selectionStart : ta.value.length;
        const value = ta.value;

        let initialQuery = "";
        const lastBackslash = value.lastIndexOf("\\", pos - 1);
        if (lastBackslash !== -1 && lastBackslash < pos) {
          initialQuery = value.slice(lastBackslash + 1, pos);
        }

        if (window.showSymbolPopup) {
          window.showSymbolPopup({
            x,
            y,
            initialQuery,
            onSelect(symbol) {
              insertAtCursor(ta, symbol.latex);
            }
          });
        }
      }

      allTextareas.forEach((ta) => {
        // Live render on input
        ta.addEventListener("input", () => {
          const box = ta.closest(".group-notes");
          if (!box) return;
          const out = box.querySelector(".rendered-output");
          renderBlockTeX(ta, out);
        });

        let lastBackslashTime = 0;

        ta.addEventListener("keydown", (e) => {
          if (e.key === "\\") {
            const now = Date.now();

            // Rapid double press ‚Üí treat as shortcut
            if (now - lastBackslashTime < 250) {
              e.preventDefault(); // don't type this second "\"

              // üî• Remove the *previous* "\" that was just typed
              const pos = ta.selectionStart != null ? ta.selectionStart : ta.value.length;
              const value = ta.value;

              if (pos > 0 && value[pos - 1] === "\\") {
                ta.value = value.slice(0, pos - 1) + value.slice(pos);
                ta.selectionStart = ta.selectionEnd = pos - 1;
                // re-render after change
                ta.dispatchEvent(new Event("input", { bubbles: true }));
              }

              // Open the popup at the cursor
              openPopupAtTextareaCursor(ta);
              lastBackslashTime = 0; // reset
              return;
            }

            // First "\" ‚Üí let it type normally
            lastBackslashTime = now;
          }
        });

        // Optional: initial render
        const box = ta.closest(".group-notes");
        if (box) {
          const out = box.querySelector(".rendered-output");
          renderBlockTeX(ta, out);
        }
      });



      // ---------- Copy buttons ----------
      const noteGroups = document.querySelectorAll(".group-notes");
      noteGroups.forEach((group) => {
        const section  = group.closest(".problem-group");
        const textarea = group.querySelector(".latex-input");
        const button   = group.querySelector(".copy-btn");

        if (!button || !textarea || !section) return;

        button.addEventListener("click", async () => {
          const problems = Array.from(
            section.querySelectorAll(":scope > p")
          ).map((p) => p.textContent.trim());

          const problemBlock =
            "Problems:\n" +
            problems.map((t, i) => `${i + 1}. ${t}`).join("\n") +
            "\n\n";

          const latex = textarea.value.trim();
          const notesBlock = "Notes (LaTeX):\n" + latex + "\n";

          const combined = problemBlock + notesBlock;

          try {
            await navigator.clipboard.writeText(combined);
            button.classList.add("copied");
            setTimeout(() => button.classList.remove("copied"), 1200);
          } catch (err) {
            console.error("Clipboard error:", err);
            alert("Copy failed ‚Äì your browser may block clipboard access.");
          }
        });
      });

      // ---------- Drawing canvases ----------
      const canvases = document.querySelectorAll(".note-canvas");
      canvases.forEach((canvas) => {
        const ctx = canvas.getContext("2d");
        const clearBtn = canvas.closest(".canvas-block").querySelector(".clear-canvas");

        function resizeCanvas() {
          const rect = canvas.getBoundingClientRect();
          const dpr = window.devicePixelRatio || 1;

          canvas.width  = rect.width * dpr;
          canvas.height = rect.height * dpr;

          ctx.setTransform(1, 0, 0, 1, 0, 0);
          ctx.scale(dpr, dpr);

          ctx.lineCap = "round";
          ctx.lineJoin = "round";
          ctx.lineWidth = 2;
        }

        resizeCanvas();
        window.addEventListener("resize", resizeCanvas);

        let drawing = false;
        let lastX = 0;
        let lastY = 0;

        function getPos(evt) {
          const rect = canvas.getBoundingClientRect();
          if (evt.touches && evt.touches[0]) {
            return {
              x: evt.touches[0].clientX - rect.left,
              y: evt.touches[0].clientY - rect.top
            };
          } else {
            return {
              x: evt.clientX - rect.left,
              y: evt.clientY - rect.top
            };
          }
        }

        function startDraw(evt) {
          evt.preventDefault();
          drawing = true;
          const pos = getPos(evt);
          lastX = pos.x;
          lastY = pos.y;
        }

        function draw(evt) {
          if (!drawing) return;
          evt.preventDefault();
          const pos = getPos(evt);
          ctx.beginPath();
          ctx.moveTo(lastX, lastY);
          ctx.lineTo(pos.x, pos.y);
          ctx.stroke();
          lastX = pos.x;
          lastY = pos.y;
        }

        function endDraw(evt) {
          if (!drawing) return;
          evt.preventDefault();
          drawing = false;
        }

        canvas.addEventListener("mousedown", startDraw);
        canvas.addEventListener("mousemove", draw);
        window.addEventListener("mouseup", endDraw);

        canvas.addEventListener("touchstart", startDraw, { passive: false });
        canvas.addEventListener("touchmove", draw, { passive: false });
        canvas.addEventListener("touchend", endDraw, { passive: false });
        canvas.addEventListener("touchcancel", endDraw, { passive: false });

        if (clearBtn) {
          clearBtn.addEventListener("click", () => {
            const rect = canvas.getBoundingClientRect();
            ctx.clearRect(0, 0, rect.width, rect.height);
          });
        }
      });
    });
  </script>

</body>
</html>